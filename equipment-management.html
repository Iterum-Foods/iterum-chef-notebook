<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Equipment Management - Iterum R&D Chef Notebook</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Shadows+Into+Light&display=swap" rel="stylesheet">
    <!-- Tailwind CSS - Built from source -->
    <link rel="stylesheet" href="assets/css/tailwind-output.css">
    <link rel="stylesheet" href="assets/css/iterum-design-system.css">
    <link rel="icon" type="image/x-icon" href="assets/icons/iterum.ico">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.2.67/pdf.min.js"></script>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Uniform Centered Header -->
    <header class="iterum-header">
      <div class="header-container">
        <!-- Logo Section -->
        <a href="index.html" class="header-logo">
          <div class="header-logo-icon">
            <span>ğŸƒ</span>
          </div>
          <div class="header-logo-text">
            <div class="header-logo-title">Iterum R&D</div>
            <div class="header-logo-subtitle">Chef Notebook</div>
          </div>
        </a>

        <!-- Center Navigation -->
        <nav class="header-navigation">
          <a href="index.html" class="header-nav-item" data-page="index">
            <span class="nav-icon">ğŸ </span>
            <span>Dashboard</span>
          </a>
          <a href="recipe-library.html" class="header-nav-item" data-page="recipe-library">
            <span class="nav-icon">ğŸ“š</span>
            <span>Library</span>
          </a>
          <a href="recipe-developer.html" class="header-nav-item" data-page="recipe-developer">
            <span class="nav-icon">ğŸ§ª</span>
            <span>Developer</span>
          </a>
          <a href="recipe-upload.html" class="header-nav-item" data-page="recipe-upload">
            <span class="nav-icon">âš¡</span>
            <span>Upload</span>
          </a>
          <a href="menu-builder.html" class="header-nav-item" data-page="menu-builder">
            <span class="nav-icon">ğŸ½ï¸</span>
            <span>Menu</span>
          </a>
          <a href="ingredients.html" class="header-nav-item" data-page="ingredients">
            <span class="nav-icon">ğŸ¥¬</span>
            <span>Ingredients</span>
          </a>
          <a href="equipment-management.html" class="header-nav-item active" data-page="equipment-management">
            <span class="nav-icon">ğŸ”§</span>
            <span>Equipment</span>
          </a>
          <a href="vendor-management.html" class="header-nav-item" data-page="vendor-management">
            <span class="nav-icon">ğŸª</span>
            <span>Vendors</span>
          </a>
        </nav>

        <!-- Right Side - User Section -->
        <div class="header-user-section">
          <!-- Project Selector -->
          <select id="header-project-selector" class="header-project-selector">
            <option value="">Select Project...</option>
          </select>

          <!-- User Info Tab -->
          <div class="header-user-tab" onclick="toggleUserDropdown()">
            <div class="header-user-avatar" id="user-avatar">
              <span id="user-avatar-initial">ğŸ‘¤</span>
            </div>
            <div class="header-user-info">
              <div class="header-user-name" id="current-user">Guest User</div>
              <div class="header-user-role">Chef</div>
            </div>
            <svg class="header-user-dropdown-icon" width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
            </svg>
          </div>

          <!-- User Dropdown Menu -->
          <div class="header-user-dropdown" id="user-dropdown">
            <div class="header-user-dropdown-header">
              <div class="header-user-dropdown-title" id="dropdown-user-name">Guest User</div>
              <div class="header-user-dropdown-subtitle" id="dropdown-user-role">Chef</div>
            </div>
            
            <div class="header-user-dropdown-menu">
              <div class="header-user-dropdown-item" onclick="userSystem.showUserModal()">
                <span>ğŸ‘¤</span>
                <span>Edit Profile</span>
              </div>
              <div class="header-user-dropdown-item" onclick="userSystem.quickSwitch()">
                <span>ğŸ”„</span>
                <span>Switch User</span>
              </div>
              <div class="header-user-dropdown-item" onclick="userSystem.showUserModal('create')">
                <span>â•</span>
                <span>Create New User</span>
              </div>
            </div>
            
            <div class="header-user-dropdown-divider"></div>
            
            <div class="header-user-dropdown-menu">
              <div class="header-user-dropdown-item" onclick="userSystem.showSettings()">
                <span>âš™ï¸</span>
                <span>Settings</span>
              </div>
              <div class="header-user-dropdown-item danger" onclick="userSystem.logout()">
                <span>ğŸšª</span>
                <span>Sign Out</span>
              </div>
            </div>
            
            <div class="header-user-dropdown-footer">
              <div class="header-user-dropdown-footer-text">Iterum R&D v1.0</div>
            </div>
          </div>

          <!-- Mobile Navigation Toggle -->
          <button class="header-mobile-toggle" onclick="toggleMobileNav()">
            <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- Mobile Navigation -->
      <nav id="mobile-nav" class="header-mobile-nav">
        <!-- Project Selector for Mobile -->
        <div style="margin-bottom: 1rem;">
          <select id="mobile-project-selector" class="header-project-selector" style="width: 100%;">
            <option value="">Select Project...</option>
          </select>
        </div>

        <!-- Mobile Navigation Items -->
        <a href="index.html" class="header-mobile-nav-item" data-page="index">
          <span class="nav-icon">ğŸ </span>
          <span>Dashboard</span>
        </a>
        <a href="recipe-library.html" class="header-mobile-nav-item" data-page="recipe-library">
          <span class="nav-icon">ğŸ“š</span>
          <span>Library</span>
        </a>
        <a href="recipe-developer.html" class="header-mobile-nav-item" data-page="recipe-developer">
          <span class="nav-icon">ğŸ§ª</span>
          <span>Developer</span>
        </a>
        <a href="recipe-upload.html" class="header-mobile-nav-item" data-page="recipe-upload">
          <span class="nav-icon">âš¡</span>
          <span>Upload</span>
        </a>
        <a href="menu-builder.html" class="header-mobile-nav-item" data-page="menu-builder">
          <span class="nav-icon">ğŸ½ï¸</span>
          <span>Menu</span>
        </a>
        <a href="ingredients.html" class="header-mobile-nav-item" data-page="ingredients">
          <span class="nav-icon">ğŸ¥¬</span>
          <span>Ingredients</span>
        </a>
        <a href="equipment-management.html" class="header-mobile-nav-item active" data-page="equipment-management">
          <span class="nav-icon">ğŸ”§</span>
          <span>Equipment</span>
        </a>
        <a href="vendor-management.html" class="header-mobile-nav-item" data-page="vendor-management">
          <span class="nav-icon">ğŸª</span>
          <span>Vendors</span>
        </a>
      </nav>
    </header>

    <!-- Main Content -->
    <div class="container">
        <!-- Page Header -->
        <div class="notebook-card p-8 mb-8">
            <h1 class="text-4xl font-bold text-[#4a7c2c] mb-4" style="font-family: 'Shadows Into Light', cursive;">
                ğŸ³ Equipment Management
            </h1>
            <p class="text-lg text-[#795548] mb-6">
                Manage your kitchen equipment, track maintenance, and connect with vendors
            </p>
            
            <!-- Quick Stats -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                <div class="bg-[#eafcd7] p-4 rounded-lg text-center">
                    <div class="text-2xl font-bold text-[#4a7c2c]" id="total-equipment">0</div>
                    <div class="text-sm text-[#795548]">Total Equipment</div>
                </div>
                <div class="bg-[#fff3cd] p-4 rounded-lg text-center">
                    <div class="text-2xl font-bold text-[#f59e0b]" id="maintenance-due">0</div>
                    <div class="text-sm text-[#795548]">Maintenance Due</div>
                </div>
                <div class="bg-[#f8d7da] p-4 rounded-lg text-center">
                    <div class="text-2xl font-bold text-[#ef4444]" id="repair-needed">0</div>
                    <div class="text-sm text-[#795548]">Repair Needed</div>
                </div>
                <div class="bg-[#d1ecf1] p-4 rounded-lg text-center">
                    <div class="text-2xl font-bold text-[#17a2b8]" id="active-vendors">0</div>
                    <div class="text-sm text-[#795548]">Active Vendors</div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex flex-wrap gap-4">
                <button onclick="openAddEquipmentModal()" class="sticky-btn px-6 py-3">
                    â• Add Equipment
                </button>
                <button onclick="openEquipmentDatabaseModal()" class="sticky-btn px-6 py-3">
                    ğŸ“š Equipment Database
                </button>
                <button onclick="openWebstaurantModal()" class="sticky-btn px-6 py-3">
                    ğŸ›’ WebstaurantStore
                </button>
                <button onclick="openVendorEquipmentModal()" class="sticky-btn px-6 py-3">
                    ğŸª Vendor Equipment
                </button>
                <button onclick="exportEquipmentData()" class="sticky-btn px-6 py-3">
                    ğŸ“¤ Export Data
                </button>
                <button onclick="importEquipmentData()" class="sticky-btn px-6 py-3">
                    ğŸ“¥ Import Data
                </button>
            </div>
        </div>

        <!-- Equipment Grid -->
        <div class="equipment-grid" id="equipment-grid">
            <!-- Equipment cards will be populated here -->
        </div>
    </div>

    <!-- Add Equipment Modal -->
    <div id="add-equipment-modal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40 hidden">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center p-6 border-b">
                <h3 class="text-xl font-bold text-gray-800">Add New Equipment</h3>
                <button id="close-add-equipment-modal" class="text-gray-500 hover:text-red-500 text-2xl font-bold">&times;</button>
            </div>
            <form id="add-equipment-form" class="p-6 space-y-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Equipment Name *</label>
                        <input type="text" id="equipment-name" name="equipment-name" class="notebook-input w-full" placeholder="e.g., Commercial Blender" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Category *</label>
                        <select id="equipment-category" name="equipment-category" class="notebook-input w-full" required>
                            <option value="">Select Category</option>
                            <option value="Front of House">ğŸ½ï¸ Front of House</option>
                            <option value="Small Kitchenware">ğŸ¥„ Small Kitchenware</option>
                            <option value="Large Equipment">ğŸ­ Large Equipment</option>
                            <option value="Beverage Equipment">ğŸ¥¤ Beverage Equipment</option>
                            <option value="Refrigeration">â„ï¸ Refrigeration</option>
                            <option value="Storage">ğŸ“¦ Storage</option>
                            <option value="Safety">ğŸ›¡ï¸ Safety Equipment</option>
                        </select>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Quantity *</label>
                        <input type="number" id="equipment-quantity" name="equipment-quantity" class="notebook-input w-full" placeholder="1" min="1" value="1" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Brand/Model</label>
                        <input type="text" id="equipment-brand" name="equipment-brand" class="notebook-input w-full" placeholder="e.g., Vitamix 5200">
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Serial Number</label>
                        <input type="text" id="equipment-serial" name="equipment-serial" class="notebook-input w-full" placeholder="e.g., VM5200-12345">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Purchase Date</label>
                        <input type="date" id="equipment-purchase-date" name="equipment-purchase-date" class="notebook-input w-full">
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Warranty Expiry</label>
                        <input type="date" id="equipment-warranty" name="equipment-warranty" class="notebook-input w-full">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Status *</label>
                        <select id="equipment-status" name="equipment-status" class="notebook-input w-full" required>
                            <option value="Active">ğŸŸ¢ Active</option>
                            <option value="Maintenance">ğŸŸ¡ Maintenance Due</option>
                            <option value="Repair">ğŸ”´ Needs Repair</option>
                            <option value="Retired">âš« Retired</option>
                        </select>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Location</label>
                        <input type="text" id="equipment-location" name="equipment-location" class="notebook-input w-full" placeholder="e.g., Main Kitchen, Prep Station">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Last Maintenance Date</label>
                        <input type="date" id="equipment-last-maintenance" name="equipment-last-maintenance" class="notebook-input w-full">
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Next Maintenance Due</label>
                        <input type="date" id="equipment-next-maintenance" name="equipment-next-maintenance" class="notebook-input w-full">
                    </div>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Maintenance Notes</label>
                    <textarea id="equipment-maintenance-notes" name="equipment-maintenance-notes" class="notebook-input w-full" rows="3" placeholder="Any specific maintenance requirements or notes..."></textarea>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                    <textarea id="equipment-description" name="equipment-description" class="notebook-input w-full" rows="3" placeholder="Equipment description, specifications, or usage notes..."></textarea>
                </div>

                <div class="flex gap-3 pt-4">
                    <button type="submit" class="flex-1 bg-blue-500 hover:bg-blue-600 text-white py-3 px-4 rounded-lg font-semibold">
                        Add Equipment
                    </button>
                    <button type="button" id="cancel-add-equipment" class="flex-1 bg-gray-500 hover:bg-gray-600 text-white py-3 px-4 rounded-lg">
                        Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Equipment Modal -->
    <div id="edit-equipment-modal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40 hidden">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center p-6 border-b">
                <h3 class="text-xl font-bold text-gray-800">Edit Equipment</h3>
                <button id="close-edit-equipment-modal" class="text-gray-500 hover:text-red-500 text-2xl font-bold">&times;</button>
            </div>
            <form id="edit-equipment-form" class="p-6 space-y-4">
                <input type="hidden" id="edit-equipment-id">
                <!-- Same form fields as add equipment, but with edit- prefix -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Equipment Name *</label>
                        <input type="text" id="edit-equipment-name" name="edit-equipment-name" class="notebook-input w-full" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Category *</label>
                        <select id="edit-equipment-category" name="edit-equipment-category" class="notebook-input w-full" required>
                            <option value="">Select Category</option>
                            <option value="Front of House">ğŸ½ï¸ Front of House</option>
                            <option value="Small Kitchenware">ğŸ¥„ Small Kitchenware</option>
                            <option value="Large Equipment">ğŸ­ Large Equipment</option>
                            <option value="Beverage Equipment">ğŸ¥¤ Beverage Equipment</option>
                            <option value="Refrigeration">â„ï¸ Refrigeration</option>
                            <option value="Storage">ğŸ“¦ Storage</option>
                            <option value="Safety">ğŸ›¡ï¸ Safety Equipment</option>
                        </select>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Quantity *</label>
                        <input type="number" id="edit-equipment-quantity" name="edit-equipment-quantity" class="notebook-input w-full" placeholder="1" min="1" value="1" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Brand/Model</label>
                        <input type="text" id="edit-equipment-brand" name="edit-equipment-brand" class="notebook-input w-full">
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Serial Number</label>
                        <input type="text" id="edit-equipment-serial" name="edit-equipment-serial" class="notebook-input w-full">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Purchase Date</label>
                        <input type="date" id="edit-equipment-purchase-date" name="edit-equipment-purchase-date" class="notebook-input w-full">
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Warranty Expiry</label>
                        <input type="date" id="edit-equipment-warranty" name="edit-equipment-warranty" class="notebook-input w-full">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Status *</label>
                        <select id="edit-equipment-status" name="edit-equipment-status" class="notebook-input w-full" required>
                            <option value="Active">ğŸŸ¢ Active</option>
                            <option value="Maintenance">ğŸŸ¡ Maintenance Due</option>
                            <option value="Repair">ğŸ”´ Needs Repair</option>
                            <option value="Retired">âš« Retired</option>
                        </select>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Location</label>
                        <input type="text" id="edit-equipment-location" name="edit-equipment-location" class="notebook-input w-full">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Last Maintenance Date</label>
                        <input type="date" id="edit-equipment-last-maintenance" name="edit-equipment-last-maintenance" class="notebook-input w-full">
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Next Maintenance Due</label>
                        <input type="date" id="edit-equipment-next-maintenance" name="edit-equipment-next-maintenance" class="notebook-input w-full">
                    </div>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Maintenance Notes</label>
                    <textarea id="edit-equipment-maintenance-notes" name="edit-equipment-maintenance-notes" class="notebook-input w-full" rows="3"></textarea>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                    <textarea id="edit-equipment-description" name="edit-equipment-description" class="notebook-input w-full" rows="3"></textarea>
                </div>

                <div class="flex gap-3 pt-4">
                    <button type="submit" class="flex-1 bg-blue-500 hover:bg-blue-600 text-white py-3 px-4 rounded-lg font-semibold">
                        Update Equipment
                    </button>
                    <button type="button" id="cancel-edit-equipment" class="flex-1 bg-gray-500 hover:bg-gray-600 text-white py-3 px-4 rounded-lg">
                        Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- WebstaurantStore Integration Modal -->
    <div id="webstaurant-modal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40 hidden">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center p-6 border-b">
                <h3 class="text-xl font-bold text-gray-800">ğŸ›’ WebstaurantStore Equipment Search</h3>
                <button id="close-webstaurant-modal" class="text-gray-500 hover:text-red-500 text-2xl font-bold">&times;</button>
            </div>
            
            <div class="p-6">
                <!-- Search Controls -->
                <div class="mb-6">
                    <div class="flex gap-4 mb-4">
                        <div class="flex-1">
                            <input type="text" id="webstaurant-search" 
                                   class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4a7c2c] focus:border-transparent"
                                   placeholder="Search equipment (e.g., 'commercial mixer', 'refrigeration unit')">
                        </div>
                        <button id="webstaurant-search-btn" 
                                class="px-6 py-2 bg-[#4a7c2c] text-white rounded-lg hover:bg-[#3d6a25] transition-colors">
                            ğŸ” Search
                        </button>
                        <button id="webstaurant-browse-btn" 
                                class="px-6 py-2 bg-[#795548] text-white rounded-lg hover:bg-[#6d4c41] transition-colors">
                            ğŸ“‚ Browse Categories
                        </button>
                        <button id="open-url-import-btn" 
                                class="px-6 py-2 bg-[#e67e22] text-white rounded-lg hover:bg-[#d35400] transition-colors">
                            ğŸ”— Import from URL
                        </button>
                    </div>
                    
                    <!-- Category Quick Links -->
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-2 mb-4">
                        <button class="category-btn px-3 py-1 text-sm bg-gray-100 hover:bg-[#4a7c2c] hover:text-white rounded transition-colors" data-category="refrigeration">â„ï¸ Refrigeration</button>
                        <button class="category-btn px-3 py-1 text-sm bg-gray-100 hover:bg-[#4a7c2c] hover:text-white rounded transition-colors" data-category="cooking">ğŸ”¥ Cooking</button>
                        <button class="category-btn px-3 py-1 text-sm bg-gray-100 hover:bg-[#4a7c2c] hover:text-white rounded transition-colors" data-category="preparation">ğŸ”ª Prep</button>
                        <button class="category-btn px-3 py-1 text-sm bg-gray-100 hover:bg-[#4a7c2c] hover:text-white rounded transition-colors" data-category="storage">ğŸ“¦ Storage</button>
                        <button class="category-btn px-3 py-1 text-sm bg-gray-100 hover:bg-[#4a7c2c] hover:text-white rounded transition-colors" data-category="cleaning">ğŸ§½ Cleaning</button>
                        <button class="category-btn px-3 py-1 text-sm bg-gray-100 hover:bg-[#4a7c2c] hover:text-white rounded transition-colors" data-category="safety">ğŸ›¡ï¸ Safety</button>
                        <button class="category-btn px-3 py-1 text-sm bg-gray-100 hover:bg-[#4a7c2c] hover:text-white rounded transition-colors" data-category="smallwares">ğŸ¥„ Smallwares</button>
                        <button class="category-btn px-3 py-1 text-sm bg-gray-100 hover:bg-[#4a7c2c] hover:text-white rounded transition-colors" data-category="beverage">ğŸ¥¤ Beverage</button>
                    </div>
                </div>
                
                <!-- Loading State -->
                <div id="webstaurant-loading" class="hidden text-center py-8">
                    <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-[#4a7c2c] mx-auto mb-4"></div>
                    <p class="text-gray-600">Searching WebstaurantStore...</p>
                </div>
                
                <!-- Search Results -->
                <div id="webstaurant-results" class="hidden">
                    <div class="flex justify-between items-center mb-4">
                        <h4 class="text-lg font-semibold text-gray-800">Search Results</h4>
                        <div class="text-sm text-gray-600">
                            <span id="webstaurant-result-count">0</span> items found
                        </div>
                    </div>
                    
                    <div id="webstaurant-products" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-h-96 overflow-y-auto">
                        <!-- Products will be populated here -->
                    </div>
                </div>
                
                <!-- No Results -->
                <div id="webstaurant-no-results" class="hidden text-center py-8">
                    <div class="text-gray-400 text-6xl mb-4">ğŸ”</div>
                    <h4 class="text-lg font-semibold text-gray-600 mb-2">No equipment found</h4>
                    <p class="text-gray-500">Try adjusting your search terms or browse categories</p>
                </div>
                
                <!-- Error State -->
                <div id="webstaurant-error" class="hidden text-center py-8">
                    <div class="text-red-400 text-6xl mb-4">âš ï¸</div>
                    <h4 class="text-lg font-semibold text-red-600 mb-2">Search Error</h4>
                    <p class="text-red-500" id="webstaurant-error-message">Unable to search WebstaurantStore</p>
                    <button id="webstaurant-retry-btn" class="mt-4 px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition-colors">
                        ğŸ”„ Try Again
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Equipment Database Modal -->
    <div id="equipment-db-modal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40 hidden">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center p-6 border-b">
                <h3 class="text-xl font-bold text-gray-800">ğŸ“š Equipment Database</h3>
                <button id="close-equipment-db-modal" class="text-gray-500 hover:text-red-500 text-2xl font-bold">&times;</button>
            </div>
            
            <div class="p-6">
                <!-- Database Controls -->
                <div class="mb-6">
                    <div class="flex justify-between items-center mb-4">
                        <button id="load-equipment-db" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-semibold">
                            ğŸ”„ Load Equipment Database
                        </button>
                        <div class="flex gap-2">
                            <input type="text" id="equipment-db-search" placeholder="ğŸ” Search equipment..." 
                                   class="notebook-input px-3 py-2 w-64">
                            <select id="equipment-db-category-filter" class="notebook-input px-3 py-2">
                                <option value="">ğŸ·ï¸ All Categories</option>
                                <option value="Front of House">ğŸ½ï¸ Front of House</option>
                                <option value="Small Kitchenware">ğŸ¥„ Small Kitchenware</option>
                                <option value="Large Equipment">ğŸ­ Large Equipment</option>
                                <option value="Beverage Equipment">ğŸ¥¤ Beverage Equipment</option>
                                <option value="Refrigeration">â„ï¸ Refrigeration</option>
                                <option value="Storage">ğŸ“¦ Storage</option>
                                <option value="Safety">ğŸ›¡ï¸ Safety Equipment</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Database Results -->
                <div id="equipment-db-results" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <!-- Equipment database items will be populated here -->
                </div>

                <!-- No Results Message -->
                <div id="no-equipment-db-results" class="hidden text-center py-12">
                    <div class="text-6xl mb-4">ğŸ“š</div>
                    <h3 class="text-xl font-semibold text-gray-700 mb-2">No equipment found in database</h3>
                    <p class="text-gray-500">Try adjusting your search or loading the database first</p>
                </div>

                <!-- Loading Message -->
                <div id="equipment-db-loading" class="hidden text-center py-12">
                    <div class="text-6xl mb-4">â³</div>
                    <h3 class="text-xl font-semibold text-gray-700 mb-2">Loading equipment database...</h3>
                    <p class="text-gray-500">Please wait while we fetch the equipment data</p>
                </div>
            </div>
        </div>
    </div>

    <!-- URL Import Modal -->
    <div id="url-import-modal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40 hidden">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center p-6 border-b">
                <h3 class="text-xl font-bold text-gray-800">ğŸ”— Import Equipment from URL</h3>
                <button id="close-url-import-modal" class="text-gray-500 hover:text-red-500 text-2xl font-bold">&times;</button>
            </div>
            
            <div class="p-6">
                <!-- URL Input Section -->
                <div class="mb-6">
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4">
                        <h4 class="font-semibold text-blue-800 mb-2">ğŸŒ Supported Suppliers</h4>
                        <div class="text-sm text-blue-700 space-y-1">
                            <p>â€¢ <strong>WebRestaurant Store</strong> - Complete product info with specs</p>
                            <p>â€¢ <strong>Amazon Business</strong> - Commercial equipment listings</p>
                            <p>â€¢ <strong>Home Depot Pro</strong> - Professional kitchen equipment</p>
                            <p>â€¢ <strong>Restaurant Depot</strong> - Bulk commercial supplies</p>
                            <p>â€¢ <strong>Katom</strong> - Restaurant supply equipment</p>
                            <p>â€¢ <strong>Any supplier website</strong> - Generic parsing available</p>
                        </div>
                    </div>
                    
                    <div class="flex gap-4 mb-4">
                        <div class="flex-1">
                            <input type="url" id="equipment-url-input" 
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#4a7c2c] focus:border-transparent text-lg"
                                   placeholder="Paste equipment URL here (e.g., https://www.webstaurantstore.com/...)">
                        </div>
                        <button id="parse-url-btn" 
                                class="px-8 py-3 bg-[#4a7c2c] text-white rounded-lg hover:bg-[#3d6a25] transition-colors font-semibold">
                            ğŸ” Parse URL
                        </button>
                    </div>
                    
                    <div class="text-sm text-gray-600">
                        <p><strong>ğŸ’¡ How to use:</strong> Copy the URL from any equipment product page and paste it above. We'll automatically extract the product details!</p>
                    </div>
                </div>
                
                <!-- Loading State -->
                <div id="url-parsing-loading" class="hidden text-center py-8">
                    <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-[#4a7c2c] mx-auto mb-4"></div>
                    <p class="text-gray-600">Parsing equipment data from URL...</p>
                </div>
                
                <!-- Error State -->
                <div id="url-parsing-error" class="hidden">
                    <div class="bg-red-50 border border-red-200 rounded-lg p-4 mb-4">
                        <h4 class="font-semibold text-red-800 mb-2">âŒ Parsing Error</h4>
                        <p id="url-error-message" class="text-red-700"></p>
                        <div class="mt-2 text-sm text-red-600">
                            <p><strong>Troubleshooting:</strong></p>
                            <ul class="list-disc list-inside mt-1">
                                <li>Check that the URL is correct and accessible</li>
                                <li>Make sure it's a product page (not a category or search page)</li>
                                <li>Try copying the URL directly from the browser address bar</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- Parsed Equipment Preview -->
                <div id="parsed-equipment-preview" class="hidden">
                    <div class="bg-green-50 border border-green-200 rounded-lg p-6 mb-4">
                        <h4 class="font-semibold text-green-800 mb-4">âœ… Equipment Parsed Successfully!</h4>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <h5 class="font-medium text-gray-700 mb-2">Basic Information</h5>
                                <div class="space-y-2 text-sm">
                                    <p><strong>Name:</strong> <span id="parsed-name"></span></p>
                                    <p><strong>Brand:</strong> <span id="parsed-brand"></span></p>
                                    <p><strong>Model:</strong> <span id="parsed-model"></span></p>
                                    <p><strong>Category:</strong> <span id="parsed-category"></span></p>
                                    <p><strong>Price:</strong> $<span id="parsed-price"></span></p>
                                    <p><strong>Supplier:</strong> <span id="parsed-supplier"></span></p>
                                </div>
                            </div>
                            
                            <div>
                                <h5 class="font-medium text-gray-700 mb-2">Specifications</h5>
                                <div id="parsed-specs" class="text-sm text-gray-600 max-h-32 overflow-y-auto">
                                    <!-- Specifications will be populated here -->
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-4">
                            <h5 class="font-medium text-gray-700 mb-2">Description</h5>
                            <p id="parsed-description" class="text-sm text-gray-600"></p>
                        </div>
                        
                        <div class="mt-6 flex justify-end gap-3">
                            <button id="edit-parsed-equipment" 
                                    class="px-4 py-2 bg-[#f39c12] text-white rounded-lg hover:bg-[#e67e22] transition-colors">
                                âœï¸ Edit Before Adding
                            </button>
                            <button id="import-parsed-equipment" 
                                    class="px-6 py-2 bg-[#4a7c2c] text-white rounded-lg hover:bg-[#3d6a25] transition-colors font-semibold">
                                ğŸ“¥ Add to Equipment
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Recent URLs -->
                <div id="recent-urls-section" class="hidden">
                    <h4 class="font-semibold text-gray-700 mb-3">ğŸ•’ Recently Parsed URLs</h4>
                    <div id="recent-urls-list" class="space-y-2">
                        <!-- Recent URLs will be populated here -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
      // Toggle user dropdown menu
      function toggleUserDropdown() {
        const dropdown = document.getElementById('user-dropdown');
        const userTab = document.querySelector('.header-user-tab');
        
        if (dropdown && userTab) {
          dropdown.classList.toggle('active');
          userTab.classList.toggle('active');
        }
      }

      // Close dropdown when clicking outside
      document.addEventListener('click', function(event) {
        const dropdown = document.getElementById('user-dropdown');
        const userTab = document.querySelector('.header-user-tab');
        
        if (dropdown && userTab && !userTab.contains(event.target) && !dropdown.contains(event.target)) {
          dropdown.classList.remove('active');
          userTab.classList.remove('active');
        }
      });

      // Toggle mobile navigation
      function toggleMobileNav() {
        const mobileNav = document.getElementById('mobile-nav');
        if (mobileNav) {
          mobileNav.classList.toggle('active');
        }
      }

      // Close mobile nav when clicking outside
      document.addEventListener('click', function(event) {
        const mobileNav = document.getElementById('mobile-nav');
        const mobileToggle = document.querySelector('.header-mobile-toggle');
        
        if (mobileNav && mobileToggle && !mobileToggle.contains(event.target) && !mobileNav.contains(event.target)) {
          mobileNav.classList.remove('active');
        }
      });
    </script>

    <!-- Essential Scripts -->
    <!-- Load Firebase Configuration -->
    <script src="assets/js/firebase-config.js"></script>
    
    <!-- Load Firebase Authentication -->
    <script type="module" src="assets/js/firebase-auth.js"></script>
    <script type="module" src="assets/js/firebase-auth-ui.js"></script>
    
    <!-- Load Unified Authentication System -->
    <script src="assets/js/unified_auth_system.js"></script>
    
    <!-- Load Page Protection System -->
    <script src="assets/js/page-protection.js"></script>
    
    <!-- Load Header User Synchronization -->
    <script src="assets/js/header_user_sync.js"></script>
    
    <!-- Load Header Sync Loader (ensures sync on all pages) -->
    <script src="assets/js/header_sync_loader.js"></script>
    
    <!-- Enhanced User Management now handled by Firebase Auth -->
    <script src="assets/js/project-management-system.js"></script>
    <!-- Project management now handled by new system -->
    <script src="assets/js/error_handler.js"></script>
    
    <!-- Equipment Management Functions -->
    <script>
      // Equipment Management Functions
      function openAddEquipmentModal() {
        const modal = document.getElementById('add-equipment-modal');
        if (modal) {
          modal.classList.remove('hidden');
        }
      }
      
      function openEquipmentDatabaseModal() {
        alert('Equipment Database feature coming soon!');
      }
      
      function openWebstaurantModal() {
        alert('WebstaurantStore integration coming soon!');
      }
      
      // Vendor management now handled by dedicated vendor-management.html page
      function openVendorEquipmentModal() {
        window.location.href = 'vendor-management.html';
      }
      
      function exportEquipmentData() {
        alert('Export feature coming soon!');
      }
      
      function importEquipmentData() {
        alert('Import feature coming soon!');
      }
      
      // Close modal functions
      function closeAddEquipmentModal() {
        const modal = document.getElementById('add-equipment-modal');
        if (modal) {
          modal.classList.add('hidden');
        }
      }
      
      // Initialize equipment management
      document.addEventListener('DOMContentLoaded', function() {
        // Close modal when clicking close button
        const closeBtn = document.getElementById('close-add-equipment-modal');
        if (closeBtn) {
          closeBtn.addEventListener('click', closeAddEquipmentModal);
        }
        
        // Close modal when clicking outside
        const modal = document.getElementById('add-equipment-modal');
        if (modal) {
          modal.addEventListener('click', function(e) {
            if (e.target === modal) {
              closeAddEquipmentModal();
            }
          });
        }
        
        // Handle form submission
        const form = document.getElementById('add-equipment-form');
        if (form) {
          form.addEventListener('submit', function(e) {
            e.preventDefault();
            alert('Equipment added successfully! (Demo mode)');
            closeAddEquipmentModal();
            form.reset();
          });
        }
      });
    </script>
    
    <script>
      // Initialize user system and project manager
      document.addEventListener('DOMContentLoaded', function() {
        // User system now initializes automatically
        console.log('ğŸ” User system auto-initialization enabled');
        
        // Initialize project manager if available
        if (window.projectManager) {
          console.log('âœ… Project manager ready');
        } else {
          console.log('â³ Waiting for project manager...');
        }
      });
    </script>

    <!-- Initialize Unified Authentication System -->
    <script>
      // Initialize authentication system when DOM is ready
      document.addEventListener('DOMContentLoaded', function() {
        console.log('ğŸš€ DOM loaded, initializing authentication system...');
        
        // Wait a moment for all scripts to load
        setTimeout(() => {
          if (typeof UnifiedAuthSystem !== 'undefined') {
            console.log('âœ… UnifiedAuthSystem class found, creating instance...');
            window.unifiedAuthSystem = new UnifiedAuthSystem();
            window.unifiedAuth = window.unifiedAuthSystem; // Alias for onclick handlers
            console.log('âœ… Authentication system initialized');
          } else {
            console.error('âŒ UnifiedAuthSystem class not found');
          }
          
          // Initialize page protection if available
          if (typeof PageProtection !== 'undefined') {
            console.log('âœ… PageProtection class found, creating instance...');
            window.pageProtection = new PageProtection();
            console.log('âœ… Page protection system initialized');
          } else {
            console.warn('âš ï¸ PageProtection class not found');
          }
        }, 100);
      });
    </script>
  </body>
</html> 