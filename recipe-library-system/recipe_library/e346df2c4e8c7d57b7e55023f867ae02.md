# Complete Recipe Workflow for Iterum App

A comprehensive solution that finds, sorts, organizes, and uploads recipe files to your Iterum app in one seamless workflow.

## 🎯 What This Solution Does

This complete workflow combines two powerful programs:

1. **Recipe Finder** - Scans folders for recipe files, analyzes content, and organizes them by cuisine and category
2. **Recipe Uploader** - Uploads the organized recipes to your Iterum app backend

## 📁 Files Created

### Core Programs
- `recipe_menu_finder.py` - Recipe finding and sorting program
- `recipe_uploader.py` - Recipe uploading to Iterum app
- `complete_recipe_workflow.py` - Combined workflow program

### User Interfaces
- `run_recipe_finder.py` - Interactive recipe finder
- `run_uploader.py` - Interactive recipe uploader
- `complete_recipe_workflow.py` - Complete workflow interface

### Batch Files (Windows)
- `find_recipes.bat` - Run recipe finder
- `upload_recipes.bat` - Run recipe uploader
- `complete_workflow.bat` - Run complete workflow

### Documentation
- `README_Recipe_Finder.md` - Recipe finder documentation
- `COMPLETE_WORKFLOW_README.md` - This file
- `RECIPE_FINDER_SUMMARY.md` - Summary of the recipe finder

### Dependencies
- `requirements_recipe_finder.txt` - Python dependencies

## 🚀 Quick Start

### Option 1: Complete Workflow (Recommended)
```bash
# Windows
double-click complete_workflow.bat

# Or command line
python complete_recipe_workflow.py
```

### Option 2: Step by Step
```bash
# Step 1: Find and sort recipes
python run_recipe_finder.py

# Step 2: Upload to Iterum app
python run_uploader.py
```

### Option 3: Command Line
```bash
# Find and sort recipes
python recipe_menu_finder.py "Iterum App/uploads" --output "sorted_recipes" --copy --report --csv

# Upload to Iterum app
python recipe_uploader.py --source "sorted_recipes" --backend "http://localhost:8000" --archive --report
```

## 🔧 Prerequisites

### 1. Python Dependencies
```bash
pip install -r requirements_recipe_finder.txt
```

Or install manually:
```bash
pip install requests pandas openpyxl
```

### 2. Iterum App Running
Ensure your Iterum app is running on `http://localhost:8000`

### 3. Recipe Files
Place your recipe files in `Iterum App/uploads/` folder

## 📋 Workflow Steps

### Step 1: Recipe Finding and Sorting
1. **Scan Folders** - Program scans your uploads folder for recipe files
2. **Content Analysis** - Analyzes file content to determine if it's a recipe/menu
3. **Categorization** - Categorizes by cuisine type (Italian, Mexican, etc.)
4. **Organization** - Creates organized folder structure
5. **Reports** - Generates detailed analysis reports

### Step 2: Upload to Iterum App
1. **Backend Check** - Verifies Iterum app is running
2. **Authentication** - Logs into your Iterum app (optional)
3. **File Upload** - Uploads organized recipes to the backend
4. **Progress Tracking** - Shows upload progress and results
5. **Archiving** - Moves successfully uploaded files to archive

## 🎛️ Configuration Options

### Recipe Finder Configuration
- **Source Folder**: `Iterum App/uploads` (your existing uploads)
- **Output Folder**: `sorted_recipes` (organized files)
- **Supported Formats**: Excel, Word, PDF, text files
- **Cuisine Detection**: 10+ cuisine types automatically detected

### Uploader Configuration
- **Backend URL**: `http://localhost:8000` (your Iterum app)
- **Authentication**: Optional username/password login
- **Upload Endpoint**: `/api/recipes/bulk-upload`
- **Archive**: Automatically archive uploaded files

## 📊 Output Structure

### Organized Files
```
sorted_recipes/
├── recipes/
│   ├── italian/
│   ├── mediterranean/
│   ├── mexican/
│   └── ...
├── menus/
├── uncategorized/
├── recipe_analysis_report.json
└── recipe_inventory.csv
```

### Upload Results
```
uploaded_recipes/          # Archived uploaded files
upload_report.json         # Upload results
recipe_uploader.log        # Upload logs
```

## 🔍 Features

### Smart Recipe Detection
- **Content Analysis**: Uses keyword matching and confidence scoring
- **Multiple Formats**: Supports Excel, Word, PDF, text files
- **Cuisine Recognition**: Automatically detects cuisine types
- **Metadata Extraction**: Extracts cooking time, servings, difficulty

### Intelligent Organization
- **Category Sorting**: Recipes, menus, uncategorized
- **Cuisine Folders**: Organized by cuisine type
- **Duplicate Handling**: Prevents file conflicts
- **Structured Output**: Clean folder hierarchy

### Seamless Upload
- **Backend Integration**: Works with your existing Iterum app
- **Authentication**: Secure login to your app
- **Progress Tracking**: Real-time upload progress
- **Error Handling**: Graceful error recovery
- **Archiving**: Automatic file cleanup

### Comprehensive Reporting
- **JSON Reports**: Detailed analysis data
- **CSV Exports**: Spreadsheet-friendly data
- **Upload Reports**: Upload success/failure tracking
- **Logging**: Detailed operation logs

## 🛠️ Customization

### Adding New Cuisines
Edit `recipe_menu_finder.py`:
```python
self.cuisine_types = {
    'your_cuisine': ['keyword1', 'keyword2', 'keyword3'],
    # ... existing cuisines
}
```

### Changing Backend URL
Edit the configuration in any script:
```python
backend_url = "http://your-server:8000"
```

### Adjusting Confidence Scoring
Modify the `calculate_confidence` method in `recipe_menu_finder.py`

## 📈 Performance

- **Efficient Processing**: Handles large folders quickly
- **Memory Management**: Processes files in chunks
- **Concurrent Uploads**: Controlled upload concurrency
- **Error Recovery**: Continues processing on individual file failures

## 🔒 Security

- **Secure Authentication**: Password-protected uploads
- **File Validation**: Validates file types and sizes
- **Error Logging**: Detailed error tracking
- **Safe File Handling**: Proper file cleanup

## 🐛 Troubleshooting

### Common Issues

1. **Backend Not Running**
   ```
   ❌ Cannot connect to Iterum backend
   Solution: Start your Iterum app on http://localhost:8000
   ```

2. **No Recipe Files Found**
   ```
   ❌ No recipe files found
   Solution: Add recipe files to Iterum App/uploads/ folder
   ```

3. **Authentication Failed**
   ```
   ❌ Authentication failed
   Solution: Check your Iterum app credentials
   ```

4. **Missing Dependencies**
   ```
   ❌ Module not found
   Solution: Run pip install -r requirements_recipe_finder.txt
   ```

### Log Files
- `recipe_finder.log` - Recipe finder operations
- `recipe_uploader.log` - Upload operations
- Check these files for detailed error information

## 📞 Support

### Getting Help
1. Check the log files for error details
2. Verify all dependencies are installed
3. Ensure Iterum app is running
4. Test with a small folder first

### File Locations
- **Source**: `Iterum App/uploads/`
- **Organized**: `sorted_recipes/`
- **Archived**: `uploaded_recipes/`
- **Logs**: Current directory

## 🚀 Future Enhancements

Potential improvements:
- **Machine Learning**: Better recipe detection
- **Image Processing**: Recipe photo analysis
- **Web Interface**: Browser-based management
- **Real-time Monitoring**: Live folder watching
- **API Integration**: External recipe sources
- **Batch Processing**: Multiple folder support

## 📝 Usage Examples

### Basic Usage
```bash
# Run complete workflow
python complete_recipe_workflow.py

# Choose option 2 (organize and upload)
# Enter credentials when prompted
# View results in Iterum app
```

### Advanced Usage
```bash
# Find and sort only
python recipe_menu_finder.py "My Recipes" --output "Organized" --copy --report

# Upload specific folder
python recipe_uploader.py --source "Organized" --backend "http://myserver:8000" --archive
```

### Batch Processing
```bash
# Process multiple folders
for folder in folder1 folder2 folder3; do
    python recipe_menu_finder.py "$folder" --output "sorted_$folder"
    python recipe_uploader.py --source "sorted_$folder"
done
```

---

## 🎉 Ready to Use!

Your complete recipe workflow is ready to organize and upload recipes to your Iterum app. The solution provides:

- **Smart recipe detection** and organization
- **Seamless upload** to your existing app
- **Comprehensive reporting** and logging
- **Easy-to-use interfaces** for all skill levels
- **Robust error handling** and recovery

**Start with `complete_workflow.bat` or `python complete_recipe_workflow.py` to get started!**

---

**Happy Recipe Organizing! 🍳📁🚀** 