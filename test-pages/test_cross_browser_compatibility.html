<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cross-Browser Compatibility Test - Iterum</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover {
            background: #2563eb;
        }
        .test-button:disabled {
            background: #9ca3af;
            cursor: not-allowed;
        }
        .test-button.success {
            background: #10b981;
        }
        .test-button.success:hover {
            background: #059669;
        }
        .test-button.warning {
            background: #f59e0b;
        }
        .test-button.warning:hover {
            background: #d97706;
        }
        .test-result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
        }
        .success {
            background: #d1fae5;
            color: #065f46;
            border: 1px solid #a7f3d0;
        }
        .error {
            background: #fee2e2;
            color: #991b1b;
            border: 1px solid #fca5a5;
        }
        .info {
            background: #dbeafe;
            color: #1e40af;
            border: 1px solid #93c5fd;
        }
        .loading {
            background: #fef3c7;
            color: #92400e;
            border: 1px solid #fde68a;
        }
        .warning {
            background: #fef3c7;
            color: #92400e;
            border: 1px solid #fde68a;
        }
        .browser-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .browser-card {
            background: #f8fafc;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
        }
        .browser-card h4 {
            margin: 0 0 10px 0;
            color: #1f2937;
        }
        .browser-status {
            font-size: 12px;
            padding: 5px 10px;
            border-radius: 3px;
            display: inline-block;
            margin: 5px 0;
        }
        .status-pass {
            background: #d1fae5;
            color: #065f46;
        }
        .status-fail {
            background: #fee2e2;
            color: #991b1b;
        }
        .status-pending {
            background: #fef3c7;
            color: #92400e;
        }
        .feature-test {
            background: #f3f4f6;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .api-test {
            background: #e5e7eb;
            padding: 10px;
            border-radius: 5px;
            margin: 5px 0;
            font-family: monospace;
            font-size: 12px;
        }
        .test-data {
            background: #f3f4f6;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
        }
        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e5e7eb;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #10b981);
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üåê Cross-Browser Compatibility Test</h1>
        <p>This page tests the cross-browser compatibility for the Iterum app across different browsers and devices.</p>
        
        <div id="status" class="test-result info">
            Initializing cross-browser compatibility test...
        </div>
        
        <!-- Test Progress -->
        <div class="test-section">
            <h2>Test Progress</h2>
            <div class="progress-bar">
                <div id="progress-fill" class="progress-fill" style="width: 0%"></div>
            </div>
            <div id="progress-text">0% Complete</div>
        </div>
        
        <!-- Browser Detection -->
        <div class="test-section">
            <h2>Browser Detection</h2>
            <button onclick="testBrowserDetection()" class="test-button">Test Browser Detection</button>
            <button onclick="testBrowserFeatures()" class="test-button">Test Browser Features</button>
            <button onclick="testBrowserAPIs()" class="test-button">Test Browser APIs</button>
            <div id="browser-info" class="test-data">
                No browser info yet...
            </div>
        </div>
        
        <!-- Browser-Specific Tests -->
        <div class="test-section">
            <h2>Browser-Specific Tests</h2>
            <div class="browser-grid" id="browser-grid">
                <!-- Browser cards will be populated dynamically -->
            </div>
        </div>
        
        <!-- Feature Compatibility Tests -->
        <div class="test-section">
            <h2>Feature Compatibility Tests</h2>
            <button onclick="testLocalStorage()" class="test-button">Test localStorage</button>
            <button onclick="testSessionStorage()" class="test-button">Test sessionStorage</button>
            <button onclick="testIndexedDB()" class="test-button">Test IndexedDB</button>
            <button onclick="testWebGL()" class="test-button">Test WebGL</button>
            <button onclick="testWebRTC()" class="test-button">Test WebRTC</button>
            <button onclick="testServiceWorker()" class="test-button">Test Service Worker</button>
            <div id="feature-results"></div>
        </div>
        
        <!-- CSS Compatibility Tests -->
        <div class="test-section">
            <h2>CSS Compatibility Tests</h2>
            <button onclick="testCSSGrid()" class="test-button">Test CSS Grid</button>
            <button onclick="testFlexbox()" class="test-button">Test Flexbox</button>
            <button onclick="testCSSVariables()" class="test-button">Test CSS Variables</button>
            <button onclick="testMediaQueries()" class="test-button">Test Media Queries</button>
            <button onclick="testTransforms()" class="test-button">Test Transforms</button>
            <div id="css-results"></div>
        </div>
        
        <!-- JavaScript Compatibility Tests -->
        <div class="test-section">
            <h2>JavaScript Compatibility Tests</h2>
            <button onclick="testES6Features()" class="test-button">Test ES6 Features</button>
            <button onclick="testAsyncAwait()" class="test-button">Test Async/Await</button>
            <button onclick="testPromises()" class="test-button">Test Promises</button>
            <button onclick="testModules()" class="test-button">Test Modules</button>
            <button onclick="testFetch()" class="test-button">Test Fetch API</button>
            <div id="js-results"></div>
        </div>
        
        <!-- Security Tests -->
        <div class="test-section">
            <h2>Security Tests</h2>
            <button onclick="testHTTPS()" class="test-button">Test HTTPS</button>
            <button onclick="testCSP()" class="test-button">Test CSP</button>
            <button onclick="testCORS()" class="test-button">Test CORS</button>
            <button onclick="testXSS()" class="test-button">Test XSS Protection</button>
            <button onclick="testCSRF()" class="test-button">Test CSRF Protection</button>
            <div id="security-results"></div>
        </div>
        
        <!-- Performance Tests -->
        <div class="test-section">
            <h2>Performance Tests</h2>
            <button onclick="testPerformance()" class="test-button">Test Performance</button>
            <button onclick="testMemoryUsage()" class="test-button">Test Memory Usage</button>
            <button onclick="testNetworkSpeed()" class="test-button">Test Network Speed</button>
            <button onclick="testRendering()" class="test-button">Test Rendering</button>
            <div id="performance-results"></div>
        </div>
        
        <!-- Test Results -->
        <div class="test-section">
            <h2>Test Results</h2>
            <div id="test-results"></div>
        </div>
        
        <!-- Test Data Display -->
        <div class="test-section">
            <h2>Browser Test Data</h2>
            <div id="test-data-display" class="test-data">
                No browser test data yet...
            </div>
        </div>
    </div>

    <!-- Load required scripts -->
    <script src="assets/js/firebase-config.js"></script>
    <script type="module" src="assets/js/firebase-auth.js"></script>
    <script type="module" src="assets/js/firebase-auth-ui.js"></script>
    <script src="assets/js/unified_auth_system.js"></script>
    <script src="assets/js/project-management-system.js"></script>

    <script>
        let testResults = [];
        let browserData = {};
        
        // Initialize test
        window.addEventListener('load', async () => {
            updateStatus('Initializing cross-browser compatibility test...', 'loading');
            
            // Wait for systems to initialize
            await new Promise(resolve => setTimeout(resolve, 2000));
            
            if (window.unifiedAuthSystem && window.projectManager) {
                updateStatus('‚úÖ Cross-browser compatibility test ready!', 'success');
                initializeBrowserGrid();
                testBrowserDetection();
            } else {
                updateStatus('‚ùå Required systems not available', 'error');
            }
        });
        
        function updateStatus(message, type) {
            const statusDiv = document.getElementById('status');
            statusDiv.textContent = message;
            statusDiv.className = `test-result ${type}`;
        }
        
        function updateProgress(percentage) {
            document.getElementById('progress-fill').style.width = percentage + '%';
            document.getElementById('progress-text').textContent = percentage + '% Complete';
        }
        
        function addTestResult(test, status, details) {
            testResults.push({ test, status, details, timestamp: new Date() });
            updateTestResults();
        }
        
        function updateTestResults() {
            const resultsDiv = document.getElementById('test-results');
            let html = '<h3>Test Results:</h3>';
            
            testResults.forEach((result, index) => {
                const statusClass = result.status === 'PASS' ? 'success' : 'error';
                const statusIcon = result.status === 'PASS' ? '‚úÖ' : '‚ùå';
                html += `
                    <div class="test-result ${statusClass}">
                        <strong>${statusIcon} ${result.test}</strong><br>
                        <small>${result.details}</small><br>
                        <small>Time: ${result.timestamp.toLocaleTimeString()}</small>
                    </div>
                `;
            });
            
            resultsDiv.innerHTML = html;
        }
        
        function testBrowserDetection() {
            updateStatus('Testing browser detection...', 'loading');
            
            try {
                const userAgent = navigator.userAgent;
                const browserInfo = {
                    userAgent: userAgent,
                    browser: getBrowserName(),
                    version: getBrowserVersion(),
                    engine: getBrowserEngine(),
                    os: getOperatingSystem(),
                    language: navigator.language,
                    platform: navigator.platform,
                    cookieEnabled: navigator.cookieEnabled,
                    onLine: navigator.onLine
                };
                
                browserData.browserInfo = browserInfo;
                updateBrowserData();
                
                addTestResult('Browser Detection', 'PASS', `${browserInfo.browser} ${browserInfo.version} on ${browserInfo.os}`);
                updateStatus('‚úÖ Browser detection test completed!', 'success');
                
            } catch (error) {
                addTestResult('Browser Detection', 'FAIL', `Error: ${error.message}`);
                updateStatus(`‚ùå Browser detection test failed: ${error.message}`, 'error');
            }
        }
        
        function getBrowserName() {
            const userAgent = navigator.userAgent;
            if (userAgent.includes('Chrome')) return 'Chrome';
            if (userAgent.includes('Firefox')) return 'Firefox';
            if (userAgent.includes('Safari')) return 'Safari';
            if (userAgent.includes('Edge')) return 'Edge';
            if (userAgent.includes('Opera')) return 'Opera';
            return 'Unknown';
        }
        
        function getBrowserVersion() {
            const userAgent = navigator.userAgent;
            const match = userAgent.match(/(Chrome|Firefox|Safari|Edge|Opera)\/(\d+\.\d+)/);
            return match ? match[2] : 'Unknown';
        }
        
        function getBrowserEngine() {
            const userAgent = navigator.userAgent;
            if (userAgent.includes('Chrome')) return 'Blink';
            if (userAgent.includes('Firefox')) return 'Gecko';
            if (userAgent.includes('Safari')) return 'WebKit';
            if (userAgent.includes('Edge')) return 'EdgeHTML';
            return 'Unknown';
        }
        
        function getOperatingSystem() {
            const userAgent = navigator.userAgent;
            if (userAgent.includes('Windows')) return 'Windows';
            if (userAgent.includes('Mac')) return 'macOS';
            if (userAgent.includes('Linux')) return 'Linux';
            if (userAgent.includes('Android')) return 'Android';
            if (userAgent.includes('iOS')) return 'iOS';
            return 'Unknown';
        }
        
        function testBrowserFeatures() {
            updateStatus('Testing browser features...', 'loading');
            
            try {
                const features = {
                    localStorage: typeof Storage !== 'undefined',
                    sessionStorage: typeof Storage !== 'undefined',
                    indexedDB: typeof indexedDB !== 'undefined',
                    webGL: !!document.createElement('canvas').getContext('webgl'),
                    webRTC: !!(navigator.mediaDevices && navigator.mediaDevices.getUserMedia),
                    serviceWorker: 'serviceWorker' in navigator,
                    pushManager: 'PushManager' in window,
                    geolocation: 'geolocation' in navigator,
                    notifications: 'Notification' in window,
                    webSockets: 'WebSocket' in window
                };
                
                browserData.features = features;
                updateBrowserData();
                
                const supportedFeatures = Object.values(features).filter(Boolean).length;
                const totalFeatures = Object.keys(features).length;
                
                addTestResult('Browser Features', 'PASS', `${supportedFeatures}/${totalFeatures} features supported`);
                updateStatus('‚úÖ Browser features test completed!', 'success');
                
            } catch (error) {
                addTestResult('Browser Features', 'FAIL', `Error: ${error.message}`);
                updateStatus(`‚ùå Browser features test failed: ${error.message}`, 'error');
            }
        }
        
        function testBrowserAPIs() {
            updateStatus('Testing browser APIs...', 'loading');
            
            try {
                const apis = {
                    fetch: typeof fetch !== 'undefined',
                    promise: typeof Promise !== 'undefined',
                    async: typeof async !== 'undefined',
                    await: typeof await !== 'undefined',
                    modules: typeof import !== 'undefined',
                    arrow: (() => { try { eval('() => {}'); return true; } catch(e) { return false; } })(),
                    destructuring: (() => { try { eval('const {a} = {};'); return true; } catch(e) { return false; } })(),
                    template: (() => { try { eval('`template`'); return true; } catch(e) { return false; } })()
                };
                
                browserData.apis = apis;
                updateBrowserData();
                
                const supportedAPIs = Object.values(apis).filter(Boolean).length;
                const totalAPIs = Object.keys(apis).length;
                
                addTestResult('Browser APIs', 'PASS', `${supportedAPIs}/${totalAPIs} APIs supported`);
                updateStatus('‚úÖ Browser APIs test completed!', 'success');
                
            } catch (error) {
                addTestResult('Browser APIs', 'FAIL', `Error: ${error.message}`);
                updateStatus(`‚ùå Browser APIs test failed: ${error.message}`, 'error');
            }
        }
        
        function testLocalStorage() {
            updateStatus('Testing localStorage...', 'loading');
            
            try {
                if (typeof Storage !== 'undefined') {
                    localStorage.setItem('test', 'value');
                    const value = localStorage.getItem('test');
                    localStorage.removeItem('test');
                    
                    if (value === 'value') {
                        addTestResult('localStorage', 'PASS', 'localStorage working correctly');
                        updateStatus('‚úÖ localStorage test completed!', 'success');
                    } else {
                        addTestResult('localStorage', 'FAIL', 'localStorage not working correctly');
                        updateStatus('‚ùå localStorage test failed', 'error');
                    }
                } else {
                    addTestResult('localStorage', 'FAIL', 'localStorage not supported');
                    updateStatus('‚ùå localStorage test failed - not supported', 'error');
                }
            } catch (error) {
                addTestResult('localStorage', 'FAIL', `Error: ${error.message}`);
                updateStatus(`‚ùå localStorage test failed: ${error.message}`, 'error');
            }
        }
        
        function testSessionStorage() {
            updateStatus('Testing sessionStorage...', 'loading');
            
            try {
                if (typeof Storage !== 'undefined') {
                    sessionStorage.setItem('test', 'value');
                    const value = sessionStorage.getItem('test');
                    sessionStorage.removeItem('test');
                    
                    if (value === 'value') {
                        addTestResult('sessionStorage', 'PASS', 'sessionStorage working correctly');
                        updateStatus('‚úÖ sessionStorage test completed!', 'success');
                    } else {
                        addTestResult('sessionStorage', 'FAIL', 'sessionStorage not working correctly');
                        updateStatus('‚ùå sessionStorage test failed', 'error');
                    }
                } else {
                    addTestResult('sessionStorage', 'FAIL', 'sessionStorage not supported');
                    updateStatus('‚ùå sessionStorage test failed - not supported', 'error');
                }
            } catch (error) {
                addTestResult('sessionStorage', 'FAIL', `Error: ${error.message}`);
                updateStatus(`‚ùå sessionStorage test failed: ${error.message}`, 'error');
            }
        }
        
        function testIndexedDB() {
            updateStatus('Testing IndexedDB...', 'loading');
            
            try {
                if (typeof indexedDB !== 'undefined') {
                    addTestResult('IndexedDB', 'PASS', 'IndexedDB supported');
                    updateStatus('‚úÖ IndexedDB test completed!', 'success');
                } else {
                    addTestResult('IndexedDB', 'FAIL', 'IndexedDB not supported');
                    updateStatus('‚ùå IndexedDB test failed - not supported', 'error');
                }
            } catch (error) {
                addTestResult('IndexedDB', 'FAIL', `Error: ${error.message}`);
                updateStatus(`‚ùå IndexedDB test failed: ${error.message}`, 'error');
            }
        }
        
        function testWebGL() {
            updateStatus('Testing WebGL...', 'loading');
            
            try {
                const canvas = document.createElement('canvas');
                const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
                
                if (gl) {
                    addTestResult('WebGL', 'PASS', 'WebGL supported');
                    updateStatus('‚úÖ WebGL test completed!', 'success');
                } else {
                    addTestResult('WebGL', 'FAIL', 'WebGL not supported');
                    updateStatus('‚ùå WebGL test failed - not supported', 'error');
                }
            } catch (error) {
                addTestResult('WebGL', 'FAIL', `Error: ${error.message}`);
                updateStatus(`‚ùå WebGL test failed: ${error.message}`, 'error');
            }
        }
        
        function testWebRTC() {
            updateStatus('Testing WebRTC...', 'loading');
            
            try {
                if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
                    addTestResult('WebRTC', 'PASS', 'WebRTC supported');
                    updateStatus('‚úÖ WebRTC test completed!', 'success');
                } else {
                    addTestResult('WebRTC', 'FAIL', 'WebRTC not supported');
                    updateStatus('‚ùå WebRTC test failed - not supported', 'error');
                }
            } catch (error) {
                addTestResult('WebRTC', 'FAIL', `Error: ${error.message}`);
                updateStatus(`‚ùå WebRTC test failed: ${error.message}`, 'error');
            }
        }
        
        function testServiceWorker() {
            updateStatus('Testing Service Worker...', 'loading');
            
            try {
                if ('serviceWorker' in navigator) {
                    addTestResult('Service Worker', 'PASS', 'Service Worker supported');
                    updateStatus('‚úÖ Service Worker test completed!', 'success');
                } else {
                    addTestResult('Service Worker', 'FAIL', 'Service Worker not supported');
                    updateStatus('‚ùå Service Worker test failed - not supported', 'error');
                }
            } catch (error) {
                addTestResult('Service Worker', 'FAIL', `Error: ${error.message}`);
                updateStatus(`‚ùå Service Worker test failed: ${error.message}`, 'error');
            }
        }
        
        function testCSSGrid() {
            updateStatus('Testing CSS Grid...', 'loading');
            
            try {
                const testElement = document.createElement('div');
                testElement.style.display = 'grid';
                
                if (testElement.style.display === 'grid') {
                    addTestResult('CSS Grid', 'PASS', 'CSS Grid supported');
                    updateStatus('‚úÖ CSS Grid test completed!', 'success');
                } else {
                    addTestResult('CSS Grid', 'FAIL', 'CSS Grid not supported');
                    updateStatus('‚ùå CSS Grid test failed - not supported', 'error');
                }
            } catch (error) {
                addTestResult('CSS Grid', 'FAIL', `Error: ${error.message}`);
                updateStatus(`‚ùå CSS Grid test failed: ${error.message}`, 'error');
            }
        }
        
        function testFlexbox() {
            updateStatus('Testing Flexbox...', 'loading');
            
            try {
                const testElement = document.createElement('div');
                testElement.style.display = 'flex';
                
                if (testElement.style.display === 'flex') {
                    addTestResult('Flexbox', 'PASS', 'Flexbox supported');
                    updateStatus('‚úÖ Flexbox test completed!', 'success');
                } else {
                    addTestResult('Flexbox', 'FAIL', 'Flexbox not supported');
                    updateStatus('‚ùå Flexbox test failed - not supported', 'error');
                }
            } catch (error) {
                addTestResult('Flexbox', 'FAIL', `Error: ${error.message}`);
                updateStatus(`‚ùå Flexbox test failed: ${error.message}`, 'error');
            }
        }
        
        function testCSSVariables() {
            updateStatus('Testing CSS Variables...', 'loading');
            
            try {
                const testElement = document.createElement('div');
                testElement.style.setProperty('--test-var', 'value');
                const value = testElement.style.getPropertyValue('--test-var');
                
                if (value === 'value') {
                    addTestResult('CSS Variables', 'PASS', 'CSS Variables supported');
                    updateStatus('‚úÖ CSS Variables test completed!', 'success');
                } else {
                    addTestResult('CSS Variables', 'FAIL', 'CSS Variables not supported');
                    updateStatus('‚ùå CSS Variables test failed - not supported', 'error');
                }
            } catch (error) {
                addTestResult('CSS Variables', 'FAIL', `Error: ${error.message}`);
                updateStatus(`‚ùå CSS Variables test failed: ${error.message}`, 'error');
            }
        }
        
        function testMediaQueries() {
            updateStatus('Testing Media Queries...', 'loading');
            
            try {
                if (window.matchMedia) {
                    const mediaQuery = window.matchMedia('(max-width: 768px)');
                    addTestResult('Media Queries', 'PASS', 'Media Queries supported');
                    updateStatus('‚úÖ Media Queries test completed!', 'success');
                } else {
                    addTestResult('Media Queries', 'FAIL', 'Media Queries not supported');
                    updateStatus('‚ùå Media Queries test failed - not supported', 'error');
                }
            } catch (error) {
                addTestResult('Media Queries', 'FAIL', `Error: ${error.message}`);
                updateStatus(`‚ùå Media Queries test failed: ${error.message}`, 'error');
            }
        }
        
        function testTransforms() {
            updateStatus('Testing Transforms...', 'loading');
            
            try {
                const testElement = document.createElement('div');
                testElement.style.transform = 'translateX(10px)';
                
                if (testElement.style.transform) {
                    addTestResult('Transforms', 'PASS', 'Transforms supported');
                    updateStatus('‚úÖ Transforms test completed!', 'success');
                } else {
                    addTestResult('Transforms', 'FAIL', 'Transforms not supported');
                    updateStatus('‚ùå Transforms test failed - not supported', 'error');
                }
            } catch (error) {
                addTestResult('Transforms', 'FAIL', `Error: ${error.message}`);
                updateStatus(`‚ùå Transforms test failed: ${error.message}`, 'error');
            }
        }
        
        function testES6Features() {
            updateStatus('Testing ES6 Features...', 'loading');
            
            try {
                // Test arrow functions
                const arrow = () => 'test';
                // Test destructuring
                const {a} = {a: 'test'};
                // Test template literals
                const template = `test ${a}`;
                // Test let/const
                let testLet = 'test';
                const testConst = 'test';
                
                addTestResult('ES6 Features', 'PASS', 'ES6 Features supported');
                updateStatus('‚úÖ ES6 Features test completed!', 'success');
                
            } catch (error) {
                addTestResult('ES6 Features', 'FAIL', `Error: ${error.message}`);
                updateStatus(`‚ùå ES6 Features test failed: ${error.message}`, 'error');
            }
        }
        
        function testAsyncAwait() {
            updateStatus('Testing Async/Await...', 'loading');
            
            try {
                async function testAsync() {
                    return 'test';
                }
                
                if (typeof testAsync === 'function') {
                    addTestResult('Async/Await', 'PASS', 'Async/Await supported');
                    updateStatus('‚úÖ Async/Await test completed!', 'success');
                } else {
                    addTestResult('Async/Await', 'FAIL', 'Async/Await not supported');
                    updateStatus('‚ùå Async/Await test failed - not supported', 'error');
                }
            } catch (error) {
                addTestResult('Async/Await', 'FAIL', `Error: ${error.message}`);
                updateStatus(`‚ùå Async/Await test failed: ${error.message}`, 'error');
            }
        }
        
        function testPromises() {
            updateStatus('Testing Promises...', 'loading');
            
            try {
                if (typeof Promise !== 'undefined') {
                    const promise = new Promise((resolve) => resolve('test'));
                    addTestResult('Promises', 'PASS', 'Promises supported');
                    updateStatus('‚úÖ Promises test completed!', 'success');
                } else {
                    addTestResult('Promises', 'FAIL', 'Promises not supported');
                    updateStatus('‚ùå Promises test failed - not supported', 'error');
                }
            } catch (error) {
                addTestResult('Promises', 'FAIL', `Error: ${error.message}`);
                updateStatus(`‚ùå Promises test failed: ${error.message}`, 'error');
            }
        }
        
        function testModules() {
            updateStatus('Testing Modules...', 'loading');
            
            try {
                if (typeof import !== 'undefined') {
                    addTestResult('Modules', 'PASS', 'Modules supported');
                    updateStatus('‚úÖ Modules test completed!', 'success');
                } else {
                    addTestResult('Modules', 'FAIL', 'Modules not supported');
                    updateStatus('‚ùå Modules test failed - not supported', 'error');
                }
            } catch (error) {
                addTestResult('Modules', 'FAIL', `Error: ${error.message}`);
                updateStatus(`‚ùå Modules test failed: ${error.message}`, 'error');
            }
        }
        
        function testFetch() {
            updateStatus('Testing Fetch API...', 'loading');
            
            try {
                if (typeof fetch !== 'undefined') {
                    addTestResult('Fetch API', 'PASS', 'Fetch API supported');
                    updateStatus('‚úÖ Fetch API test completed!', 'success');
                } else {
                    addTestResult('Fetch API', 'FAIL', 'Fetch API not supported');
                    updateStatus('‚ùå Fetch API test failed - not supported', 'error');
                }
            } catch (error) {
                addTestResult('Fetch API', 'FAIL', `Error: ${error.message}`);
                updateStatus(`‚ùå Fetch API test failed: ${error.message}`, 'error');
            }
        }
        
        function testHTTPS() {
            updateStatus('Testing HTTPS...', 'loading');
            
            try {
                const isHTTPS = location.protocol === 'https:';
                addTestResult('HTTPS', isHTTPS ? 'PASS' : 'FAIL', `HTTPS: ${isHTTPS}`);
                updateStatus(isHTTPS ? '‚úÖ HTTPS test completed!' : '‚ùå HTTPS test failed - not secure', isHTTPS ? 'success' : 'error');
            } catch (error) {
                addTestResult('HTTPS', 'FAIL', `Error: ${error.message}`);
                updateStatus(`‚ùå HTTPS test failed: ${error.message}`, 'error');
            }
        }
        
        function testCSP() {
            updateStatus('Testing CSP...', 'loading');
            
            try {
                // Check if CSP is enforced
                const metaTags = document.querySelectorAll('meta[http-equiv="Content-Security-Policy"]');
                addTestResult('CSP', 'PASS', `CSP meta tags: ${metaTags.length}`);
                updateStatus('‚úÖ CSP test completed!', 'success');
            } catch (error) {
                addTestResult('CSP', 'FAIL', `Error: ${error.message}`);
                updateStatus(`‚ùå CSP test failed: ${error.message}`, 'error');
            }
        }
        
        function testCORS() {
            updateStatus('Testing CORS...', 'loading');
            
            try {
                // Test CORS by making a request
                fetch('https://iterum-culinary-app.web.app')
                    .then(response => {
                        addTestResult('CORS', 'PASS', 'CORS working correctly');
                        updateStatus('‚úÖ CORS test completed!', 'success');
                    })
                    .catch(error => {
                        addTestResult('CORS', 'FAIL', `CORS error: ${error.message}`);
                        updateStatus(`‚ùå CORS test failed: ${error.message}`, 'error');
                    });
            } catch (error) {
                addTestResult('CORS', 'FAIL', `Error: ${error.message}`);
                updateStatus(`‚ùå CORS test failed: ${error.message}`, 'error');
            }
        }
        
        function testXSS() {
            updateStatus('Testing XSS Protection...', 'loading');
            
            try {
                // Test XSS protection by trying to inject script
                const testScript = '<script>alert("XSS")</script>';
                const testElement = document.createElement('div');
                testElement.textContent = testScript;
                
                if (testElement.textContent === testScript) {
                    addTestResult('XSS Protection', 'PASS', 'XSS protection working');
                    updateStatus('‚úÖ XSS Protection test completed!', 'success');
                } else {
                    addTestResult('XSS Protection', 'FAIL', 'XSS protection not working');
                    updateStatus('‚ùå XSS Protection test failed', 'error');
                }
            } catch (error) {
                addTestResult('XSS Protection', 'FAIL', `Error: ${error.message}`);
                updateStatus(`‚ùå XSS Protection test failed: ${error.message}`, 'error');
            }
        }
        
        function testCSRF() {
            updateStatus('Testing CSRF Protection...', 'loading');
            
            try {
                // Test CSRF protection by checking for tokens
                const csrfToken = document.querySelector('meta[name="csrf-token"]');
                if (csrfToken) {
                    addTestResult('CSRF Protection', 'PASS', 'CSRF token found');
                    updateStatus('‚úÖ CSRF Protection test completed!', 'success');
                } else {
                    addTestResult('CSRF Protection', 'FAIL', 'CSRF token not found');
                    updateStatus('‚ùå CSRF Protection test failed - no token', 'error');
                }
            } catch (error) {
                addTestResult('CSRF Protection', 'FAIL', `Error: ${error.message}`);
                updateStatus(`‚ùå CSRF Protection test failed: ${error.message}`, 'error');
            }
        }
        
        function testPerformance() {
            updateStatus('Testing Performance...', 'loading');
            
            try {
                const startTime = performance.now();
                
                // Simulate some work
                setTimeout(() => {
                    const endTime = performance.now();
                    const duration = endTime - startTime;
                    
                    addTestResult('Performance', 'PASS', `Performance test completed in ${duration.toFixed(2)}ms`);
                    updateStatus('‚úÖ Performance test completed!', 'success');
                }, 100);
                
            } catch (error) {
                addTestResult('Performance', 'FAIL', `Error: ${error.message}`);
                updateStatus(`‚ùå Performance test failed: ${error.message}`, 'error');
            }
        }
        
        function testMemoryUsage() {
            updateStatus('Testing Memory Usage...', 'loading');
            
            try {
                if (performance.memory) {
                    const memory = performance.memory;
                    const usedMB = (memory.usedJSHeapSize / 1024 / 1024).toFixed(2);
                    addTestResult('Memory Usage', 'PASS', `Memory usage: ${usedMB}MB`);
                    updateStatus('‚úÖ Memory Usage test completed!', 'success');
                } else {
                    addTestResult('Memory Usage', 'FAIL', 'Memory information not available');
                    updateStatus('‚ùå Memory Usage test failed - not available', 'error');
                }
            } catch (error) {
                addTestResult('Memory Usage', 'FAIL', `Error: ${error.message}`);
                updateStatus(`‚ùå Memory Usage test failed: ${error.message}`, 'error');
            }
        }
        
        function testNetworkSpeed() {
            updateStatus('Testing Network Speed...', 'loading');
            
            try {
                if (navigator.connection) {
                    const connection = navigator.connection;
                    const speed = connection.effectiveType || 'unknown';
                    addTestResult('Network Speed', 'PASS', `Network speed: ${speed}`);
                    updateStatus('‚úÖ Network Speed test completed!', 'success');
                } else {
                    addTestResult('Network Speed', 'FAIL', 'Network information not available');
                    updateStatus('‚ùå Network Speed test failed - not available', 'error');
                }
            } catch (error) {
                addTestResult('Network Speed', 'FAIL', `Error: ${error.message}`);
                updateStatus(`‚ùå Network Speed test failed: ${error.message}`, 'error');
            }
        }
        
        function testRendering() {
            updateStatus('Testing Rendering...', 'loading');
            
            try {
                const startTime = performance.now();
                
                // Test rendering performance
                const testElement = document.createElement('div');
                testElement.style.width = '100px';
                testElement.style.height = '100px';
                testElement.style.backgroundColor = 'red';
                document.body.appendChild(testElement);
                
                setTimeout(() => {
                    const endTime = performance.now();
                    const duration = endTime - startTime;
                    document.body.removeChild(testElement);
                    
                    addTestResult('Rendering', 'PASS', `Rendering test completed in ${duration.toFixed(2)}ms`);
                    updateStatus('‚úÖ Rendering test completed!', 'success');
                }, 100);
                
            } catch (error) {
                addTestResult('Rendering', 'FAIL', `Error: ${error.message}`);
                updateStatus(`‚ùå Rendering test failed: ${error.message}`, 'error');
            }
        }
        
        function initializeBrowserGrid() {
            const gridDiv = document.getElementById('browser-grid');
            const browsers = [
                { name: 'Chrome', icon: 'üåê' },
                { name: 'Firefox', icon: 'ü¶ä' },
                { name: 'Safari', icon: 'üß≠' },
                { name: 'Edge', icon: 'üåê' },
                { name: 'Opera', icon: 'üé≠' }
            ];
            
            let html = '';
            browsers.forEach(browser => {
                html += `
                    <div class="browser-card">
                        <h4>${browser.icon} ${browser.name}</h4>
                        <div class="browser-status status-pending">Pending</div>
                        <button onclick="testBrowser('${browser.name}')" class="test-button">Test ${browser.name}</button>
                    </div>
                `;
            });
            
            gridDiv.innerHTML = html;
        }
        
        function testBrowser(browserName) {
            addTestResult(`Browser Test: ${browserName}`, 'PASS', `Testing ${browserName} compatibility`);
            updateStatus(`‚úÖ Testing ${browserName}...`, 'success');
        }
        
        function updateBrowserData() {
            const dataDiv = document.getElementById('test-data-display');
            dataDiv.textContent = JSON.stringify(browserData, null, 2);
        }
    </script>
</body>
</html>
