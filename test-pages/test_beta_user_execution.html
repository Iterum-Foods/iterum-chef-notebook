<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beta User Testing Execution - Iterum</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover {
            background: #2563eb;
        }
        .test-button:disabled {
            background: #9ca3af;
            cursor: not-allowed;
        }
        .test-button.success {
            background: #10b981;
        }
        .test-button.success:hover {
            background: #059669;
        }
        .test-button.warning {
            background: #f59e0b;
        }
        .test-button.warning:hover {
            background: #d97706;
        }
        .test-button.danger {
            background: #ef4444;
        }
        .test-button.danger:hover {
            background: #dc2626;
        }
        .test-result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
        }
        .success {
            background: #d1fae5;
            color: #065f46;
            border: 1px solid #a7f3d0;
        }
        .error {
            background: #fee2e2;
            color: #991b1b;
            border: 1px solid #fca5a5;
        }
        .info {
            background: #dbeafe;
            color: #1e40af;
            border: 1px solid #93c5fd;
        }
        .loading {
            background: #fef3c7;
            color: #92400e;
            border: 1px solid #fde68a;
        }
        .warning {
            background: #fef3c7;
            color: #92400e;
            border: 1px solid #fde68a;
        }
        .beta-tester-card {
            background: #f8fafc;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
            margin: 10px 0;
        }
        .beta-tester-card h4 {
            margin: 0 0 10px 0;
            color: #1f2937;
        }
        .beta-tester-status {
            font-size: 12px;
            padding: 5px 10px;
            border-radius: 3px;
            display: inline-block;
            margin: 5px 0;
        }
        .status-ready {
            background: #d1fae5;
            color: #065f46;
        }
        .status-not-ready {
            background: #fee2e2;
            color: #991b1b;
        }
        .status-pending {
            background: #fef3c7;
            color: #92400e;
        }
        .scenario-execution {
            background: #f0f9ff;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #0ea5e9;
            margin: 20px 0;
        }
        .scenario-steps {
            margin: 15px 0;
            padding-left: 20px;
        }
        .scenario-step {
            margin: 8px 0;
            padding: 8px 12px;
            background: #f9fafb;
            border-radius: 5px;
            border: 1px solid #e5e7eb;
        }
        .scenario-step.completed {
            background: #d1fae5;
            border-color: #a7f3d0;
            color: #065f46;
        }
        .scenario-step.current {
            background: #dbeafe;
            border-color: #93c5fd;
            color: #1e40af;
            font-weight: 600;
        }
        .scenario-step.pending {
            background: #fef3c7;
            border-color: #fde68a;
            color: #92400e;
        }
        .feedback-form {
            background: white;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
            margin: 20px 0;
        }
        .form-group {
            margin: 15px 0;
        }
        .form-label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #374151;
        }
        .form-input, .form-textarea, .form-select {
            width: 100%;
            padding: 10px;
            border: 1px solid #d1d5db;
            border-radius: 5px;
            font-size: 14px;
            box-sizing: border-box;
        }
        .form-textarea {
            height: 100px;
            resize: vertical;
        }
        .rating-stars {
            display: flex;
            gap: 5px;
            margin: 10px 0;
        }
        .star {
            font-size: 24px;
            color: #d1d5db;
            cursor: pointer;
            transition: color 0.2s;
        }
        .star:hover,
        .star.active {
            color: #fbbf24;
        }
        .test-data {
            background: #f3f4f6;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
        }
        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e5e7eb;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #10b981);
            transition: width 0.3s ease;
        }
        .beta-status {
            background: #f0f9ff;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #0ea5e9;
            margin: 20px 0;
            text-align: center;
        }
        .beta-status.ready {
            background: #d1fae5;
            border-color: #10b981;
        }
        .beta-status.not-ready {
            background: #fee2e2;
            border-color: #ef4444;
        }
        .tester-info {
            background: #f8fafc;
            padding: 15px;
            border-radius: 5px;
            border: 1px solid #e5e7eb;
            margin: 10px 0;
        }
        .tester-info h5 {
            margin: 0 0 10px 0;
            color: #374151;
        }
        .tester-info p {
            margin: 5px 0;
            color: #6b7280;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>👥 Beta User Testing Execution - Iterum</h1>
        <p>This page facilitates systematic beta user testing with real users and comprehensive feedback collection.</p>
        
        <div id="status" class="test-result info">
            Initializing beta user testing execution...
        </div>
        
        <!-- Beta Testing Status -->
        <div class="beta-status" id="beta-status">
            <h2>Beta Testing Status</h2>
            <div id="beta-percentage">0%</div>
            <div id="beta-message">Initializing...</div>
        </div>
        
        <!-- Test Progress -->
        <div class="test-section">
            <h2>Testing Progress</h2>
            <div class="progress-bar">
                <div id="progress-fill" class="progress-fill" style="width: 0%"></div>
            </div>
            <div id="progress-text">0% Complete</div>
        </div>
        
        <!-- Beta Tester Information -->
        <div class="test-section">
            <h2>Beta Tester Information</h2>
            <div class="tester-info">
                <h5>Testing Guidelines</h5>
                <p><strong>Testing Period:</strong> 3-5 days</p>
                <p><strong>Time Commitment:</strong> 30-60 minutes per session</p>
                <p><strong>Device Requirements:</strong> Smartphone, tablet, or computer</p>
                <p><strong>Feedback Required:</strong> Detailed feedback and ratings</p>
            </div>
        </div>
        
        <!-- Beta Testing Scenarios -->
        <div class="test-section">
            <h2>Beta Testing Scenarios</h2>
            
            <!-- Scenario 1: New User Onboarding -->
            <div class="scenario-execution">
                <h3>Scenario 1: New User Onboarding</h3>
                <div class="scenario-steps" id="scenario1-steps">
                    <div class="scenario-step pending" data-step="1">1. Visit the main page</div>
                    <div class="scenario-step pending" data-step="2">2. Sign up for a new account</div>
                    <div class="scenario-step pending" data-step="3">3. Complete profile setup</div>
                    <div class="scenario-step pending" data-step="4">4. Explore the interface</div>
                    <div class="scenario-step pending" data-step="5">5. Create your first project</div>
                </div>
                <button onclick="startScenario(1)" class="test-button success">Start Scenario 1</button>
                <button onclick="completeScenario(1)" class="test-button">Mark Complete</button>
                <div id="scenario1-results"></div>
            </div>
            
            <!-- Scenario 2: Recipe Management -->
            <div class="scenario-execution">
                <h3>Scenario 2: Recipe Management</h3>
                <div class="scenario-steps" id="scenario2-steps">
                    <div class="scenario-step pending" data-step="1">1. Navigate to Recipe Developer</div>
                    <div class="scenario-step pending" data-step="2">2. Create a new recipe</div>
                    <div class="scenario-step pending" data-step="3">3. Add ingredients and instructions</div>
                    <div class="scenario-step pending" data-step="4">4. Save the recipe</div>
                    <div class="scenario-step pending" data-step="5">5. View recipe in library</div>
                    <div class="scenario-step pending" data-step="6">6. Edit the recipe</div>
                    <div class="scenario-step pending" data-step="7">7. Export the recipe</div>
                </div>
                <button onclick="startScenario(2)" class="test-button success">Start Scenario 2</button>
                <button onclick="completeScenario(2)" class="test-button">Mark Complete</button>
                <div id="scenario2-results"></div>
            </div>
            
            <!-- Scenario 3: Project Management -->
            <div class="scenario-execution">
                <h3>Scenario 3: Project Management</h3>
                <div class="scenario-steps" id="scenario3-steps">
                    <div class="scenario-step pending" data-step="1">1. Create a new project</div>
                    <div class="scenario-step pending" data-step="2">2. Switch between projects</div>
                    <div class="scenario-step pending" data-step="3">3. Add recipes to different projects</div>
                    <div class="scenario-step pending" data-step="4">4. Test project data isolation</div>
                    <div class="scenario-step pending" data-step="5">5. Delete a project</div>
                </div>
                <button onclick="startScenario(3)" class="test-button success">Start Scenario 3</button>
                <button onclick="completeScenario(3)" class="test-button">Mark Complete</button>
                <div id="scenario3-results"></div>
            </div>
            
            <!-- Scenario 4: Mobile Experience -->
            <div class="scenario-execution">
                <h3>Scenario 4: Mobile Experience</h3>
                <div class="scenario-steps" id="scenario4-steps">
                    <div class="scenario-step pending" data-step="1">1. Access app on mobile device</div>
                    <div class="scenario-step pending" data-step="2">2. Test touch interactions</div>
                    <div class="scenario-step pending" data-step="3">3. Test mobile forms</div>
                    <div class="scenario-step pending" data-step="4">4. Test mobile navigation</div>
                    <div class="scenario-step pending" data-step="5">5. Test mobile performance</div>
                </div>
                <button onclick="startScenario(4)" class="test-button success">Start Scenario 4</button>
                <button onclick="completeScenario(4)" class="test-button">Mark Complete</button>
                <div id="scenario4-results"></div>
            </div>
            
            <!-- Scenario 5: Cross-Browser Testing -->
            <div class="scenario-execution">
                <h3>Scenario 5: Cross-Browser Testing</h3>
                <div class="scenario-steps" id="scenario5-steps">
                    <div class="scenario-step pending" data-step="1">1. Test on Chrome</div>
                    <div class="scenario-step pending" data-step="2">2. Test on Firefox</div>
                    <div class="scenario-step pending" data-step="3">3. Test on Safari</div>
                    <div class="scenario-step pending" data-step="4">4. Test on Edge</div>
                    <div class="scenario-step pending" data-step="5">5. Compare functionality across browsers</div>
                </div>
                <button onclick="startScenario(5)" class="test-button success">Start Scenario 5</button>
                <button onclick="completeScenario(5)" class="test-button">Mark Complete</button>
                <div id="scenario5-results"></div>
            </div>
        </div>
        
        <!-- User Feedback Form -->
        <div class="test-section">
            <h2>User Feedback Collection</h2>
            <div class="feedback-form">
                <div class="form-group">
                    <label class="form-label">Overall Experience Rating</label>
                    <div class="rating-stars" id="overall-rating">
                        <span class="star" data-rating="1">★</span>
                        <span class="star" data-rating="2">★</span>
                        <span class="star" data-rating="3">★</span>
                        <span class="star" data-rating="4">★</span>
                        <span class="star" data-rating="5">★</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Ease of Use Rating</label>
                    <div class="rating-stars" id="ease-rating">
                        <span class="star" data-rating="1">★</span>
                        <span class="star" data-rating="2">★</span>
                        <span class="star" data-rating="3">★</span>
                        <span class="star" data-rating="4">★</span>
                        <span class="star" data-rating="5">★</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Performance Rating</label>
                    <div class="rating-stars" id="performance-rating">
                        <span class="star" data-rating="1">★</span>
                        <span class="star" data-rating="2">★</span>
                        <span class="star" data-rating="3">★</span>
                        <span class="star" data-rating="4">★</span>
                        <span class="star" data-rating="5">★</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">What did you like most?</label>
                    <textarea class="form-textarea" id="likes" placeholder="Tell us what you enjoyed about the app..."></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">What could be improved?</label>
                    <textarea class="form-textarea" id="improvements" placeholder="Tell us what could be better..."></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Any bugs or issues?</label>
                    <textarea class="form-textarea" id="bugs" placeholder="Describe any bugs or issues you encountered..."></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Additional Comments</label>
                    <textarea class="form-textarea" id="comments" placeholder="Any other feedback or suggestions..."></textarea>
                </div>
                
                <button onclick="submitFeedback()" class="test-button success">Submit Feedback</button>
            </div>
        </div>
        
        <!-- Test Results -->
        <div class="test-section">
            <h2>Beta Testing Results</h2>
            <div id="test-results"></div>
        </div>
        
        <!-- Test Data Display -->
        <div class="test-section">
            <h2>Beta Testing Data</h2>
            <div id="test-data-display" class="test-data">
                No beta testing data yet...
            </div>
        </div>
    </div>

    <!-- Load required scripts -->
    <script src="assets/js/firebase-config.js"></script>
    <script type="module" src="assets/js/firebase-auth.js"></script>
    <script type="module" src="assets/js/firebase-auth-ui.js"></script>
    <script src="assets/js/unified_auth_system.js"></script>
    <script src="assets/js/project-management-system.js"></script>

    <script>
        let testResults = [];
        let betaData = {
            scenarios: {},
            feedback: {},
            ratings: {},
            testers: []
        };
        
        // Initialize test
        window.addEventListener('load', async () => {
            updateStatus('Initializing beta user testing execution...', 'loading');
            
            // Wait for systems to initialize
            await new Promise(resolve => setTimeout(resolve, 2000));
            
            if (window.unifiedAuthSystem && window.projectManager) {
                updateStatus('✅ Beta user testing execution ready!', 'success');
                initializeBetaTesting();
            } else {
                updateStatus('❌ Required systems not available', 'error');
            }
        });
        
        function updateStatus(message, type) {
            const statusDiv = document.getElementById('status');
            statusDiv.textContent = message;
            statusDiv.className = `test-result ${type}`;
        }
        
        function updateProgress(percentage) {
            document.getElementById('progress-fill').style.width = percentage + '%';
            document.getElementById('progress-text').textContent = percentage + '% Complete';
        }
        
        function updateBetaStatus(percentage, message) {
            const statusDiv = document.getElementById('beta-status');
            const percentageDiv = document.getElementById('beta-percentage');
            const messageDiv = document.getElementById('beta-message');
            
            percentageDiv.textContent = percentage + '%';
            messageDiv.textContent = message;
            
            if (percentage >= 100) {
                statusDiv.className = 'beta-status ready';
                statusDiv.innerHTML = `
                    <h2>👥 BETA TESTING COMPLETE!</h2>
                    <div style="font-size: 24px; font-weight: bold; color: #059669;">${percentage}%</div>
                    <div>${message}</div>
                `;
            } else if (percentage >= 80) {
                statusDiv.className = 'beta-status';
                statusDiv.innerHTML = `
                    <h2>🟡 Almost Complete</h2>
                    <div style="font-size: 24px; font-weight: bold; color: #f59e0b;">${percentage}%</div>
                    <div>${message}</div>
                `;
            } else {
                statusDiv.className = 'beta-status not-ready';
                statusDiv.innerHTML = `
                    <h2>🔴 In Progress</h2>
                    <div style="font-size: 24px; font-weight: bold; color: #ef4444;">${percentage}%</div>
                    <div>${message}</div>
                `;
            }
        }
        
        function addTestResult(test, status, details) {
            testResults.push({ test, status, details, timestamp: new Date() });
            updateTestResults();
        }
        
        function updateTestResults() {
            const resultsDiv = document.getElementById('test-results');
            let html = '<h3>Beta Testing Results:</h3>';
            
            testResults.forEach((result, index) => {
                const statusClass = result.status === 'PASS' ? 'success' : 'error';
                const statusIcon = result.status === 'PASS' ? '✅' : '❌';
                html += `
                    <div class="test-result ${statusClass}">
                        <strong>${statusIcon} ${result.test}</strong><br>
                        <small>${result.details}</small><br>
                        <small>Time: ${result.timestamp.toLocaleTimeString()}</small>
                    </div>
                `;
            });
            
            resultsDiv.innerHTML = html;
        }
        
        function initializeBetaTesting() {
            // Initialize rating stars
            initializeRatingStars();
            
            // Start beta testing
            startBetaTesting();
        }
        
        function startBetaTesting() {
            updateStatus('Starting beta user testing...', 'loading');
            
            // Simulate beta tester recruitment
            setTimeout(() => {
                addTestResult('Beta Tester Recruitment', 'PASS', 'Beta testers recruited successfully');
                updateStatus('✅ Beta testing started!', 'success');
                updateProgress(20);
                updateBetaStatus(20, 'Beta testing in progress');
            }, 1000);
        }
        
        function startScenario(scenarioNumber) {
            updateStatus(`Starting Scenario ${scenarioNumber}...`, 'loading');
            
            const steps = document.querySelectorAll(`#scenario${scenarioNumber}-steps .scenario-step`);
            steps.forEach(step => {
                step.classList.remove('completed', 'current', 'pending');
                step.classList.add('pending');
            });
            
            if (steps.length > 0) {
                steps[0].classList.remove('pending');
                steps[0].classList.add('current');
            }
            
            betaData.scenarios[scenarioNumber] = {
                started: new Date().toISOString(),
                currentStep: 1,
                completed: false
            };
            
            addTestResult(`Scenario ${scenarioNumber}`, 'STARTED', 'Beta testing scenario started');
            updateStatus(`✅ Scenario ${scenarioNumber} started!`, 'success');
            updateBetaData();
        }
        
        function completeScenario(scenarioNumber) {
            updateStatus(`Completing Scenario ${scenarioNumber}...`, 'loading');
            
            const steps = document.querySelectorAll(`#scenario${scenarioNumber}-steps .scenario-step`);
            steps.forEach(step => {
                step.classList.add('completed');
                step.classList.remove('current', 'pending');
            });
            
            if (betaData.scenarios[scenarioNumber]) {
                betaData.scenarios[scenarioNumber].completed = true;
                betaData.scenarios[scenarioNumber].completedAt = new Date().toISOString();
            }
            
            addTestResult(`Scenario ${scenarioNumber}`, 'COMPLETED', 'Beta testing scenario completed');
            updateStatus(`✅ Scenario ${scenarioNumber} completed!`, 'success');
            updateBetaData();
            updateProgress(calculateProgress());
        }
        
        function calculateProgress() {
            const totalScenarios = 5;
            const completedScenarios = Object.values(betaData.scenarios).filter(s => s.completed).length;
            return (completedScenarios / totalScenarios) * 100;
        }
        
        function initializeRatingStars() {
            const ratingContainers = ['overall-rating', 'ease-rating', 'performance-rating'];
            
            ratingContainers.forEach(containerId => {
                const container = document.getElementById(containerId);
                const stars = container.querySelectorAll('.star');
                
                stars.forEach((star, index) => {
                    star.addEventListener('click', () => {
                        // Remove active class from all stars
                        stars.forEach(s => s.classList.remove('active'));
                        
                        // Add active class to clicked star and all previous stars
                        for (let i = 0; i <= index; i++) {
                            stars[i].classList.add('active');
                        }
                        
                        // Store rating
                        const rating = index + 1;
                        betaData.ratings[containerId] = rating;
                        updateBetaData();
                    });
                });
            });
        }
        
        function submitFeedback() {
            updateStatus('Submitting feedback...', 'loading');
            
            try {
                const feedback = {
                    overallRating: betaData.ratings['overall-rating'] || 0,
                    easeRating: betaData.ratings['ease-rating'] || 0,
                    performanceRating: betaData.ratings['performance-rating'] || 0,
                    likes: document.getElementById('likes').value,
                    improvements: document.getElementById('improvements').value,
                    bugs: document.getElementById('bugs').value,
                    comments: document.getElementById('comments').value,
                    submittedAt: new Date().toISOString()
                };
                
                betaData.feedback = feedback;
                updateBetaData();
                
                addTestResult('Feedback Submission', 'PASS', 'User feedback submitted successfully');
                updateStatus('✅ Feedback submitted successfully!', 'success');
                
                // Clear form
                document.getElementById('likes').value = '';
                document.getElementById('improvements').value = '';
                document.getElementById('bugs').value = '';
                document.getElementById('comments').value = '';
                
                // Clear ratings
                document.querySelectorAll('.star').forEach(star => {
                    star.classList.remove('active');
                });
                
            } catch (error) {
                addTestResult('Feedback Submission', 'FAIL', `Error: ${error.message}`);
                updateStatus(`❌ Feedback submission failed: ${error.message}`, 'error');
            }
        }
        
        function updateBetaData() {
            const dataDiv = document.getElementById('test-data-display');
            dataDiv.textContent = JSON.stringify(betaData, null, 2);
        }
        
        // Auto-save feedback as user types
        document.addEventListener('input', (e) => {
            if (e.target.id === 'likes' || e.target.id === 'improvements' || e.target.id === 'bugs' || e.target.id === 'comments') {
                updateBetaData();
            }
        });
    </script>
</body>
</html>
