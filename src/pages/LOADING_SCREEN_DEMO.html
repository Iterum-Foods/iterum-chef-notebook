<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3-Second Loading Screen Demo - Iterum R&D</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="startup-loading-config.js"></script>
</head>
<body class="bg-gray-100">
    
    <!-- Demo Loading Overlay (Same as main app) -->
    <div id="loading-overlay" style="position:fixed;z-index:9999;top:0;left:0;width:100vw;height:100vh;background:linear-gradient(135deg, #0f0f23 0%, #1a1a2e 25%, #16213e 50%, #0f0f23 100%);display:flex;align-items:center;justify-content:center;transition:opacity 0.7s;backdrop-filter:blur(10px);">
        <div style="display:flex;flex-direction:column;align-items:center;gap:2rem;">
            <div style="width:80px;height:80px;border:3px solid rgba(255,255,255,0.1);border-top:3px solid #64ffda;border-radius:50%;animation:spin 1.2s cubic-bezier(0.68,-0.55,0.265,1.55) infinite;position:relative;">
                <div style="display:flex;gap:8px;margin-top:1rem;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);">
                    <div style="width:8px;height:8px;border-radius:50%;background:linear-gradient(45deg,#64ffda,#ff6b6b);animation:pulse 1.5s ease-in-out infinite;"></div>
                    <div style="width:8px;height:8px;border-radius:50%;background:linear-gradient(45deg,#64ffda,#ff6b6b);animation:pulse 1.5s ease-in-out infinite;animation-delay:0.2s;"></div>
                    <div style="width:8px;height:8px;border-radius:50%;background:linear-gradient(45deg,#64ffda,#ff6b6b);animation:pulse 1.5s ease-in-out infinite;animation-delay:0.4s;"></div>
                </div>
            </div>
            <div style="font-family:'Inter',-apple-system,BlinkMacSystemFont,sans-serif;color:#e2e8f0;font-size:1.1rem;font-weight:500;text-align:center;letter-spacing:0.05em;margin-top:1rem;opacity:0.9;">Iterum R&D Chef Notebook</div>
            <div style="font-family:'Inter',-apple-system,BlinkMacSystemFont,sans-serif;color:#64ffda;font-size:0.9rem;font-weight:400;text-align:center;margin-top:0.5rem;opacity:0.7;">Initializing your culinary workspace...</div>
            <div style="font-family:'Inter',-apple-system,BlinkMacSystemFont,sans-serif;color:rgba(255,255,255,0.4);font-size:0.75rem;font-weight:400;text-align:center;margin-top:1rem;opacity:0.6;">
                <span id="countdown">Loading will complete in 3 seconds...</span>
            </div>
        </div>
    </div>

    <!-- Main Content (Hidden initially) -->
    <div class="min-h-screen flex items-center justify-center" style="opacity: 0; transition: opacity 0.5s ease;">
        <div class="max-w-2xl mx-auto px-6">
            <div class="bg-white rounded-lg shadow-lg p-8 text-center">
                <h1 class="text-3xl font-bold text-gray-900 mb-4">3-Second Loading Screen Demo</h1>
                <p class="text-gray-600 mb-6">The loading screen now displays for exactly 3 seconds before revealing the content.</p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                    <div class="bg-blue-50 rounded-lg p-4">
                        <h3 class="font-semibold text-blue-900 mb-2">‚ú® New Features</h3>
                        <ul class="text-sm text-blue-800 space-y-1">
                            <li>‚Ä¢ 3-second minimum duration</li>
                            <li>‚Ä¢ Smooth fade-out animation</li>
                            <li>‚Ä¢ Countdown timer display</li>
                            <li>‚Ä¢ Override protection</li>
                        </ul>
                    </div>
                    
                    <div class="bg-green-50 rounded-lg p-4">
                        <h3 class="font-semibold text-green-900 mb-2">üîß Controls</h3>
                        <ul class="text-sm text-green-800 space-y-1">
                            <li>‚Ä¢ setLoadingDuration(ms)</li>
                            <li>‚Ä¢ hideLoadingNow()</li>
                            <li>‚Ä¢ getLoadingTimeRemaining()</li>
                        </ul>
                    </div>
                </div>
                
                <div class="flex flex-wrap gap-4 justify-center">
                    <button onclick="reloadDemo()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                        üîÑ Reload Demo
                    </button>
                    <button onclick="setLoadingDuration(5000)" class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                        ‚è±Ô∏è 5 Second Mode
                    </button>
                    <button onclick="setLoadingDuration(1000)" class="bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                        ‚ö° 1 Second Mode
                    </button>
                    <button onclick="hideLoadingNow()" class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                        üö´ Hide Now
                    </button>
                </div>
                
                <div id="status" class="mt-6 p-4 bg-gray-50 rounded-lg">
                    <p class="text-gray-700">Loading screen completed! ‚úÖ</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Spinner Animation Styles -->
    <style>
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes pulse {
            0%, 100% { 
                opacity: 0.4;
                transform: scale(0.8);
            }
            50% { 
                opacity: 1;
                transform: scale(1);
            }
        }
    </style>

    <script>
        // Countdown functionality
        let countdownInterval;
        
        function startCountdown() {
            const countdownElement = document.getElementById('countdown');
            const startTime = Date.now();
            const duration = window.startupLoadingManager ? window.startupLoadingManager.loadingDuration : 3000;
            
            countdownInterval = setInterval(() => {
                const elapsed = Date.now() - startTime;
                const remaining = Math.max(0, duration - elapsed);
                const seconds = Math.ceil(remaining / 1000);
                
                if (remaining > 0) {
                    countdownElement.textContent = `Loading will complete in ${seconds} second${seconds !== 1 ? 's' : ''}...`;
                } else {
                    countdownElement.textContent = 'Loading complete!';
                    clearInterval(countdownInterval);
                }
            }, 100);
        }
        
        function showMainContent() {
            const mainContent = document.querySelector('.min-h-screen');
            mainContent.style.opacity = '1';
            
            const statusElement = document.getElementById('status');
            statusElement.innerHTML = `
                <p class="text-green-700">
                    ‚úÖ Loading screen completed! 
                    <span class="text-sm text-gray-500">(took exactly 3 seconds)</span>
                </p>
            `;
        }
        
        function reloadDemo() {
            window.location.reload();
        }
        
        // Initialize demo
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üé¨ 3-Second Loading Screen Demo');
            
            // Start countdown
            startCountdown();
            
            // Show main content after loading completes
            setTimeout(() => {
                showMainContent();
            }, 3500); // Slightly after loading completes
        });
        
        // Monitor loading completion
        const observer = new MutationObserver((mutations) => {
            mutations.forEach((mutation) => {
                if (mutation.type === 'attributes' && mutation.attributeName === 'style') {
                    const target = mutation.target;
                    if (target.id === 'loading-overlay' && target.style.display === 'none') {
                        console.log('üéØ Loading overlay hidden!');
                        showMainContent();
                        observer.disconnect();
                    }
                }
            });
        });
        
        const loadingOverlay = document.getElementById('loading-overlay');
        if (loadingOverlay) {
            observer.observe(loadingOverlay, { 
                attributes: true, 
                attributeFilter: ['style'] 
            });
        }
    </script>
</body>
</html>