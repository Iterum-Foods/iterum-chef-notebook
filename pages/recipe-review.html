<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Recipe Review System | Iterum R&D Chef Notebook</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Shadows+Into+Light&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary-green: #4a7c2c;
      --light-green: #b6e388;
      --cream: #fffbe7;
      --border-green: #e2d8b8;
    }
    
    .recipe-card {
      background: linear-gradient(135deg, #ffffff 0%, #f9fdf4 100%);
      border: 2px solid var(--border-green);
      transition: all 0.3s ease;
    }
    
    .recipe-card:hover {
      border-color: var(--light-green);
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0,0,0,0.1);
    }
    
    .status-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 1rem;
      border-radius: 9999px;
      font-weight: 600;
      font-size: 0.875rem;
    }
    
    .status-pending {
      background: #fef3c7;
      color: #d97706;
    }
    
    .status-missing {
      background: #fecaca;
      color: #dc2626;
    }
    
    .status-ready {
      background: #d1fae5;
      color: #059669;
    }
    
    .btn {
      padding: 0.75rem 1.5rem;
      border-radius: 0.5rem;
      font-weight: 600;
      transition: all 0.2s ease;
      border: none;
      cursor: pointer;
    }
    
    .btn-approve {
      background: #059669;
      color: white;
    }
    
    .btn-approve:hover {
      background: #047857;
      transform: translateY(-1px);
    }
    
    .btn-reject {
      background: #dc2626;
      color: white;
    }
    
    .btn-reject:hover {
      background: #b91c1c;
      transform: translateY(-1px);
    }
    
    .btn-secondary {
      background: #6b7280;
      color: white;
    }
    
    .btn-secondary:hover {
      background: #4b5563;
    }
    
    .form-input {
      width: 100%;
      padding: 0.75rem;
      border: 2px solid #e5e7eb;
      border-radius: 0.5rem;
      transition: border-color 0.2s ease;
    }
    
    .form-input:focus {
      outline: none;
      border-color: var(--light-green);
    }
    
    .missing-field {
      border-color: #fca5a5 !important;
      background: #fef2f2;
    }
    
    .loading {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 2rem;
    }
    
    .spinner {
      width: 32px;
      height: 32px;
      border: 3px solid #e5e7eb;
      border-top: 3px solid var(--primary-green);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .toast {
      position: fixed;
      top: 1rem;
      right: 1rem;
      padding: 1rem 1.5rem;
      border-radius: 0.5rem;
      color: white;
      font-weight: 600;
      z-index: 1000;
      transform: translateX(100%);
      transition: transform 0.3s ease;
    }
    
    .toast.show {
      transform: translateX(0);
    }
    
    .toast-success {
      background: #059669;
    }
    
    .toast-error {
      background: #dc2626;
    }
    
    .project-selector {
      margin-top: 1rem;
      padding: 1rem;
      background: #f3f4f6;
      border-radius: 0.5rem;
    }
  </style>
</head>
<body class="bg-gray-50 min-h-screen">
  <!-- Header -->
  <header class="sticky top-0 z-40 bg-[#fffbe7] border-b-[3px] border-[#e2d8b8] rounded-b-[18px] shadow">
    <div class="flex items-center justify-between max-w-7xl mx-auto px-4 py-2 gap-4 flex-wrap">
      <div class="flex items-center gap-2">
        <svg width="48" height="48" viewBox="0 0 64 64" fill="none" style="vertical-align: middle;">
          <ellipse cx="32" cy="44" rx="18" ry="8" fill="#b6e388" stroke="#7bb661" stroke-width="2"/>
          <ellipse cx="24" cy="44" rx="2.5" ry="2.5" fill="#eafcd7" stroke="#7bb661" stroke-width="1"/>
          <ellipse cx="32" cy="44" rx="2.5" ry="2.5" fill="#eafcd7" stroke="#7bb661" stroke-width="1"/>
          <ellipse cx="40" cy="44" rx="2.5" ry="2.5" fill="#eafcd7" stroke="#7bb661" stroke-width="1"/>
          <path d="M32 44 Q34 37 40 34 Q46 31 52 37" stroke="#7bb661" stroke-width="1.5" fill="none"/>
          <path d="M32 44 Q30 37 24 34 Q18 31 12 37" stroke="#7bb661" stroke-width="1.5" fill="none"/>
        </svg>
        <span style="font-family: 'Shadows Into Light', cursive; font-size: 2rem; color: #b8860b; margin-left: 0.7rem; letter-spacing: 1.5px; text-shadow: 0 2px 8px #fffbe7, 0 1px 0 #e2d8b8;">Iterum R&D Chef Notebook</span>
      </div>
      <nav class="flex gap-5 font-semibold flex-wrap">
        <a href="index.html" class="text-[#4a7c2c] px-3 py-2 rounded-lg hover:bg-[#b6e388]/30 transition">Home</a>
        <a href="recipe-upload.html" class="text-[#4a7c2c] px-3 py-2 rounded-lg hover:bg-[#b6e388]/30 transition">Upload</a>
        <a href="recipe-review.html" class="text-[#4a7c2c] px-3 py-2 rounded-lg hover:bg-[#b6e388]/30 transition bg-[#b6e388]/30">Review</a>
        <a href="recipe-library.html" class="text-[#4a7c2c] px-3 py-2 rounded-lg hover:bg-[#b6e388]/30 transition">Library</a>
        <a href="ingredients.html" class="text-[#4a7c2c] px-3 py-2 rounded-lg hover:bg-[#b6e388]/30 transition">Ingredients</a>
      </nav>
      <div class="flex items-center gap-3">
        <span id="user-info" class="px-4 py-1 rounded-full bg-[#eafcd7] text-[#3a5a40] font-semibold text-base shadow">Guest</span>
        <button id="login-btn" class="bg-none border-none text-[#388e3c] font-semibold cursor-pointer">Login</button>
        <button id="logout-btn" style="display:none;" class="bg-none border-none text-[#a83232] font-semibold cursor-pointer">Logout</button>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="max-w-6xl mx-auto mt-8 p-6">
    <!-- Header Section -->
    <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
      <div class="flex justify-between items-center">
        <div>
          <h1 class="text-3xl font-bold text-gray-900 mb-2">Recipe Review Center</h1>
          <p class="text-gray-600">Review and approve uploaded recipes before adding them to your library.</p>
        </div>
        <div class="flex gap-3">
          <button id="refresh-btn" class="btn btn-secondary">
            üîÑ Refresh
          </button>
          <button id="batch-approve-btn" class="btn btn-approve" disabled>
            ‚úÖ Approve Selected
          </button>
          <button id="batch-reject-btn" class="btn btn-reject" disabled>
            ‚ùå Reject Selected
          </button>
        </div>
      </div>
      
      <!-- Stats -->
      <div class="grid grid-cols-3 gap-4 mt-6">
        <div class="bg-yellow-50 p-4 rounded-lg">
          <div class="text-2xl font-bold text-yellow-600" id="pending-count">0</div>
          <div class="text-sm text-yellow-700">Pending Review</div>
        </div>
        <div class="bg-red-50 p-4 rounded-lg">
          <div class="text-2xl font-bold text-red-600" id="missing-count">0</div>
          <div class="text-sm text-red-700">Missing Information</div>
        </div>
        <div class="bg-green-50 p-4 rounded-lg">
          <div class="text-2xl font-bold text-green-600" id="ready-count">0</div>
          <div class="text-sm text-green-700">Ready to Approve</div>
        </div>
      </div>
    </div>

    <!-- Filters -->
    <div class="bg-white rounded-lg shadow p-4 mb-6">
      <div class="flex gap-4 items-center">
        <label class="flex items-center gap-2">
          <input type="checkbox" id="show-ready" checked>
          <span>Ready to Approve</span>
        </label>
        <label class="flex items-center gap-2">
          <input type="checkbox" id="show-missing" checked>
          <span>Missing Info</span>
        </label>
        <label class="flex items-center gap-2">
          <input type="checkbox" id="show-all" checked>
          <span>All Pending</span>
        </label>
        <div class="ml-auto">
          <select id="sort-by" class="form-input w-auto">
            <option value="newest">Newest First</option>
            <option value="oldest">Oldest First</option>
            <option value="title">By Title</option>
            <option value="status">By Status</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Loading State -->
    <div id="loading-state" class="loading">
      <div class="spinner"></div>
      <span class="ml-3 text-gray-600">Loading recipes...</span>
    </div>

    <!-- Empty State -->
    <div id="empty-state" class="text-center py-12 bg-white rounded-lg shadow" style="display: none;">
      <div class="text-6xl mb-4">üìù</div>
      <h3 class="text-xl font-semibold text-gray-700 mb-2">No Recipes to Review</h3>
      <p class="text-gray-500 mb-6">Upload some recipes to get started with the review process.</p>
      <a href="recipe-upload.html" class="btn btn-approve">Upload Recipes</a>
    </div>

    <!-- Recipe List -->
    <div id="recipe-list" class="space-y-6" style="display: none;">
      <!-- Recipe cards will be inserted here -->
    </div>
  </main>

  <!-- Project Assignment Modal -->
  <div id="project-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" style="display: none;">
    <div class="bg-white rounded-lg p-6 max-w-md w-full mx-4">
      <h3 class="text-lg font-semibold mb-4">Assign to Project</h3>
      <select id="project-select" class="form-input mb-4">
        <option value="">Select a project...</option>
        <!-- Projects will be loaded here -->
      </select>
      <div class="flex gap-3 justify-end">
        <button id="project-cancel" class="btn btn-secondary">Cancel</button>
        <button id="project-confirm" class="btn btn-approve">Assign & Approve</button>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="assets/js/unified_auth_system.js"></script>
  <script>
    class RecipeReviewSystem {
      constructor() {
        this.recipes = [];
        this.selectedRecipes = new Set();
        this.projects = [];
        this.currentRecipeForProject = null;
        
        this.init();
      }

      async init() {
        await this.loadProjects();
        await this.loadRecipes();
        this.setupEventListeners();
      }

      async loadProjects() {
        try {
          const response = await fetch('/api/projects/');
          if (response.ok) {
            this.projects = await response.json();
            this.populateProjectSelect();
          }
        } catch (error) {
          console.error('Failed to load projects:', error);
          this.projects = [
            { id: 1, name: "Default Project" },
            { id: 2, name: "New Menu Items" },
            { id: 3, name: "Seasonal Specials" }
          ];
          this.populateProjectSelect();
        }
      }

      populateProjectSelect() {
        const select = document.getElementById('project-select');
        select.innerHTML = '<option value="">Select a project...</option>';
        this.projects.forEach(project => {
          select.innerHTML += `<option value="${project.id}">${project.name}</option>`;
        });
      }

      async loadRecipes() {
        this.showLoading(true);
        
        try {
          // Load from both backend and localStorage
          const [backendRecipes, localRecipes] = await Promise.all([
            this.fetchBackendRecipes(),
            this.fetchLocalRecipes()
          ]);
          
          this.recipes = [...backendRecipes, ...localRecipes];
          this.updateStats();
          this.renderRecipes();
          
        } catch (error) {
          console.error('Failed to load recipes:', error);
          this.showToast('Failed to load recipes', 'error');
          this.recipes = [];
        } finally {
          this.showLoading(false);
        }
      }

      async fetchBackendRecipes() {
        try {
          const response = await fetch('/api/recipes/review/pending');
          if (response.ok) {
            const data = await response.json();
            return (data.recipes || []).map(r => ({ ...r, source: 'backend' }));
          }
          return [];
        } catch (error) {
          console.error('Backend recipes fetch failed:', error);
          return [];
        }
      }

      fetchLocalRecipes() {
        try {
          const local = JSON.parse(localStorage.getItem('pendingRecipes') || '[]');
          return local.map(r => ({ ...r, source: 'local' }));
        } catch (error) {
          console.error('Local recipes fetch failed:', error);
          return [];
        }
      }

      updateStats() {
        const pendingCount = this.recipes.length;
        const missingCount = this.recipes.filter(r => this.getMissingFields(r).length > 0).length;
        const readyCount = pendingCount - missingCount;
        
        document.getElementById('pending-count').textContent = pendingCount;
        document.getElementById('missing-count').textContent = missingCount;
        document.getElementById('ready-count').textContent = readyCount;
      }

      getMissingFields(recipe) {
        const missing = [];
        if (!recipe.title && !recipe.name) missing.push('Title');
        if (!recipe.ingredients || !recipe.ingredients.length) missing.push('Ingredients');
        if (!recipe.instructions && !recipe.steps) missing.push('Instructions');
        return missing;
      }

      renderRecipes() {
        const container = document.getElementById('recipe-list');
        const emptyState = document.getElementById('empty-state');
        
        if (this.recipes.length === 0) {
          container.style.display = 'none';
          emptyState.style.display = 'block';
          return;
        }
        
        container.style.display = 'block';
        emptyState.style.display = 'none';
        
        container.innerHTML = this.recipes.map((recipe, index) => this.renderRecipeCard(recipe, index)).join('');
        this.attachCardEventListeners();
      }

      renderRecipeCard(recipe, index) {
        const missing = this.getMissingFields(recipe);
        const isReady = missing.length === 0;
        const statusClass = isReady ? 'status-ready' : 'status-missing';
        const statusText = isReady ? 'Ready to approve' : `Missing: ${missing.join(', ')}`;
        
        return `
          <div class="recipe-card p-6 rounded-lg" data-recipe-index="${index}">
            <div class="flex items-start justify-between mb-4">
              <div class="flex items-center gap-3">
                <input type="checkbox" class="recipe-checkbox w-5 h-5" data-index="${index}">
                <div>
                  <h3 class="text-lg font-semibold text-gray-900">${recipe.title || recipe.name || 'Untitled Recipe'}</h3>
                  <div class="text-sm text-gray-500">Source: ${recipe.source === 'backend' ? 'Database' : 'Uploaded'}</div>
                </div>
              </div>
              <span class="status-badge ${statusClass}">
                ${isReady ? '‚úÖ' : '‚ö†Ô∏è'} ${statusText}
              </span>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Title</label>
                <input type="text" class="form-input ${!recipe.title && !recipe.name ? 'missing-field' : ''}" 
                       value="${recipe.title || recipe.name || ''}" 
                       data-field="title" data-index="${index}">
              </div>
              <div class="md:col-span-2">
                <label class="block text-sm font-medium text-gray-700 mb-1">Description</label>
                <input type="text" class="form-input" 
                       value="${recipe.description || ''}" 
                       data-field="description" data-index="${index}">
              </div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Ingredients</label>
                <textarea class="form-input ${!recipe.ingredients?.length ? 'missing-field' : ''}" rows="4" 
                          data-field="ingredients" data-index="${index}">${this.formatIngredients(recipe.ingredients)}</textarea>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Instructions</label>
                <textarea class="form-input ${!recipe.instructions?.length && !recipe.steps?.length ? 'missing-field' : ''}" rows="4" 
                          data-field="instructions" data-index="${index}">${this.formatInstructions(recipe.instructions || recipe.steps)}</textarea>
              </div>
            </div>
            
            <div class="flex justify-between items-center">
              <div class="flex gap-3">
                <button class="btn btn-approve approve-btn" data-index="${index}">
                  ‚úÖ Approve
                </button>
                <button class="btn btn-reject reject-btn" data-index="${index}">
                  ‚ùå Reject
                </button>
              </div>
              <div class="text-sm text-gray-500">
                ${recipe.created_at ? new Date(recipe.created_at).toLocaleDateString() : 'Recently uploaded'}
              </div>
            </div>
          </div>
        `;
      }

      formatIngredients(ingredients) {
        if (!ingredients) return '';
        return ingredients.map(ing => {
          if (typeof ing === 'string') return ing;
          return ing.name || ing.ingredient || '';
        }).join('\n');
      }

      formatInstructions(instructions) {
        if (!instructions) return '';
        return instructions.map(inst => {
          if (typeof inst === 'string') return inst;
          return inst.instruction || inst.step || '';
        }).join('\n');
      }

      attachCardEventListeners() {
        // Field updates
        document.querySelectorAll('input[data-field], textarea[data-field]').forEach(input => {
          input.addEventListener('input', this.handleFieldUpdate.bind(this));
        });
        
        // Recipe selection
        document.querySelectorAll('.recipe-checkbox').forEach(checkbox => {
          checkbox.addEventListener('change', this.handleRecipeSelection.bind(this));
        });
        
        // Approve/Reject buttons
        document.querySelectorAll('.approve-btn').forEach(btn => {
          btn.addEventListener('click', this.handleApprove.bind(this));
        });
        
        document.querySelectorAll('.reject-btn').forEach(btn => {
          btn.addEventListener('click', this.handleReject.bind(this));
        });
      }

      handleFieldUpdate(event) {
        const index = parseInt(event.target.dataset.index);
        const field = event.target.dataset.field;
        const value = event.target.value;
        
        if (field === 'ingredients' || field === 'instructions') {
          this.recipes[index][field] = value.split('\n').filter(line => line.trim());
        } else {
          this.recipes[index][field] = value;
        }
        
        // Update localStorage if it's a local recipe
        if (this.recipes[index].source === 'local') {
          const localRecipes = this.recipes.filter(r => r.source === 'local');
          localStorage.setItem('pendingRecipes', JSON.stringify(localRecipes));
        }
        
        // Update missing field styling
        const missing = this.getMissingFields(this.recipes[index]);
        if (missing.includes(field.charAt(0).toUpperCase() + field.slice(1))) {
          event.target.classList.add('missing-field');
        } else {
          event.target.classList.remove('missing-field');
        }
        
        this.updateStats();
      }

      handleRecipeSelection(event) {
        const index = parseInt(event.target.dataset.index);
        if (event.target.checked) {
          this.selectedRecipes.add(index);
        } else {
          this.selectedRecipes.delete(index);
        }
        
        const hasSelection = this.selectedRecipes.size > 0;
        document.getElementById('batch-approve-btn').disabled = !hasSelection;
        document.getElementById('batch-reject-btn').disabled = !hasSelection;
      }

      async handleApprove(event) {
        const index = parseInt(event.target.dataset.index);
        this.currentRecipeForProject = index;
        document.getElementById('project-modal').style.display = 'flex';
      }

      async handleReject(event) {
        const index = parseInt(event.target.dataset.index);
        if (confirm('Are you sure you want to reject this recipe?')) {
          await this.rejectRecipe(index);
        }
      }

      async approveRecipe(index, projectId = null) {
        const recipe = this.recipes[index];
        
        try {
          if (recipe.source === 'backend') {
            // Update backend recipe
            const response = await fetch(`/api/recipes/${recipe.id}/review`, {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({ 
                status: 'approved',
                project_id: projectId 
              })
            });
            
            if (!response.ok) throw new Error('Failed to approve recipe');
          } else {
            // Create new recipe from local
            const payload = {
              title: recipe.title || recipe.name,
              description: recipe.description || '',
              ingredients: this.formatIngredientsForAPI(recipe.ingredients),
              instructions: this.formatInstructionsForAPI(recipe.instructions || recipe.steps),
              status: 'published',
              project_id: projectId
            };
            
            const response = await fetch('/api/recipes/', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify(payload)
            });
            
            if (!response.ok) throw new Error('Failed to save recipe');
            
            // Remove from localStorage
            const localRecipes = JSON.parse(localStorage.getItem('pendingRecipes') || '[]');
            const localIndex = localRecipes.findIndex(r => r.title === recipe.title);
            if (localIndex !== -1) {
              localRecipes.splice(localIndex, 1);
              localStorage.setItem('pendingRecipes', JSON.stringify(localRecipes));
            }
          }
          
          // Remove from current list
          this.recipes.splice(index, 1);
          this.selectedRecipes.delete(index);
          
          this.showToast('Recipe approved successfully!', 'success');
          this.renderRecipes();
          this.updateStats();
          
        } catch (error) {
          console.error('Approval failed:', error);
          this.showToast('Failed to approve recipe', 'error');
        }
      }

      async rejectRecipe(index) {
        const recipe = this.recipes[index];
        
        try {
          if (recipe.source === 'backend') {
            const response = await fetch(`/api/recipes/${recipe.id}/review`, {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({ status: 'rejected' })
            });
            
            if (!response.ok) throw new Error('Failed to reject recipe');
          } else {
            // Remove from localStorage
            const localRecipes = JSON.parse(localStorage.getItem('pendingRecipes') || '[]');
            const localIndex = localRecipes.findIndex(r => r.title === recipe.title);
            if (localIndex !== -1) {
              localRecipes.splice(localIndex, 1);
              localStorage.setItem('pendingRecipes', JSON.stringify(localRecipes));
            }
          }
          
          this.recipes.splice(index, 1);
          this.selectedRecipes.delete(index);
          
          this.showToast('Recipe rejected', 'success');
          this.renderRecipes();
          this.updateStats();
          
        } catch (error) {
          console.error('Rejection failed:', error);
          this.showToast('Failed to reject recipe', 'error');
        }
      }

      formatIngredientsForAPI(ingredients) {
        if (!ingredients) return [];
        return ingredients.map(ing => {
          if (typeof ing === 'string') {
            return { name: ing, quantity: 0, unit: '' };
          }
          return ing;
        });
      }

      formatInstructionsForAPI(instructions) {
        if (!instructions) return [];
        return instructions.map((inst, index) => {
          if (typeof inst === 'string') {
            return { step_number: index + 1, instruction: inst };
          }
          return inst;
        });
      }

      setupEventListeners() {
        // Refresh button
        document.getElementById('refresh-btn').addEventListener('click', () => {
          this.loadRecipes();
        });
        
        // Batch operations
        document.getElementById('batch-approve-btn').addEventListener('click', () => {
          this.handleBatchApprove();
        });
        
        document.getElementById('batch-reject-btn').addEventListener('click', () => {
          this.handleBatchReject();
        });
        
        // Project modal
        document.getElementById('project-cancel').addEventListener('click', () => {
          document.getElementById('project-modal').style.display = 'none';
          this.currentRecipeForProject = null;
        });
        
        document.getElementById('project-confirm').addEventListener('click', () => {
          const projectId = document.getElementById('project-select').value;
          if (this.currentRecipeForProject !== null) {
            this.approveRecipe(this.currentRecipeForProject, projectId || null);
            document.getElementById('project-modal').style.display = 'none';
            this.currentRecipeForProject = null;
          }
        });
      }

      async handleBatchApprove() {
        if (this.selectedRecipes.size === 0) return;
        
        if (confirm(`Approve ${this.selectedRecipes.size} selected recipes?`)) {
          const indices = Array.from(this.selectedRecipes).sort((a, b) => b - a);
          for (const index of indices) {
            await this.approveRecipe(index);
          }
        }
      }

      async handleBatchReject() {
        if (this.selectedRecipes.size === 0) return;
        
        if (confirm(`Reject ${this.selectedRecipes.size} selected recipes?`)) {
          const indices = Array.from(this.selectedRecipes).sort((a, b) => b - a);
          for (const index of indices) {
            await this.rejectRecipe(index);
          }
        }
      }

      showLoading(show) {
        document.getElementById('loading-state').style.display = show ? 'flex' : 'none';
        document.getElementById('recipe-list').style.display = show ? 'none' : 'block';
      }

      showToast(message, type = 'success') {
        const toast = document.createElement('div');
        toast.className = `toast toast-${type}`;
        toast.textContent = message;
        document.body.appendChild(toast);
        
        setTimeout(() => toast.classList.add('show'), 100);
        setTimeout(() => {
          toast.classList.remove('show');
          setTimeout(() => document.body.removeChild(toast), 300);
        }, 3000);
      }
    }

    // Initialize the system when page loads
    document.addEventListener('DOMContentLoaded', () => {
      new RecipeReviewSystem();
    });
  </script>
</body>
</html>
